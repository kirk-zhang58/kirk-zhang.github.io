
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="CoffeeMan">
    <title>Data Wrangling - CoffeeMan</title>
    <meta name="author" content="kirkzhang">
    
    
        <link rel="icon" href="https://kirk-zhang58.github.io/assets/images/cover-v1.2.0.jpg">
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"kirkzhang","sameAs":["https://github.com/SimonTeo58","https://stackoverflow.com/users/11289672/simon-teo","https://twitter.com/shiming_kirk","https://www.linkedin.com/in/kirk-zhang-424935235/","zxc741208584@qq.com"],"image":"avatar.jpg"},"articleBody":"MIT: The Missing Semester of Your CS Education\n\n\n\nData Wranglinghttps://missing.csail.mit.edu/2020/data-wrangling/\nHave you ever wanted to take data in one format and turn it into a different format? Of course you have! That, in very general terms, is what this lecture is all about. Specifically, massaging data, whether in text or binary format, until you end up with exactly what you wanted.\nWe’ve already seen some basic data wrangling in past lectures. Pretty much any time you use the | operator, you are performing some kind of data wrangling. Consider a command like journalctl | grep -i intel. It finds all system log entries that mention Intel (case insensitive). You may not think of it as wrangling data, but it is going from one format (your entire system log) to a format that is more useful to you (just the intel log entries). Most data wrangling is about knowing what tools you have at your disposal, and how to combine them.\nLet’s start from the beginning. To wrangle data, we need two things: data to wrangle, and something to do with it. Logs often make for a good use-case, because you often want to investigate things about them, and reading the whole thing isn’t feasible. Let’s figure out who’s trying to log into my server by looking at my server’s log:\nssh myserver journalctl\n\n\nThat’s far too much stuff. Let’s limit it to ssh stuff:\nssh myserver journalctl | grep sshd\n\n\nNotice that we’re using a pipe to stream a remote file through grep on our local computer! ssh is magical, and we will talk more about it in the next lecture on the command-line environment. This is still way more stuff than we wanted though. And pretty hard to read. Let’s do better:\nssh myserver &#39;journalctl | grep sshd | grep &quot;Disconnected from&quot;&#39; | less\n\n\nWhy the additional quoting? Well, our logs may be quite large, and it’s wasteful to stream it all to our computer and then do the filtering. Instead, we can do the filtering on the remote server, and then massage the data locally. less gives us a “pager” that allows us to scroll up and down through the long output. To save some additional traffic while we debug our command-line, we can even stick the current filtered logs into a file so that we don’t have to access the network while developing:\n$ ssh myserver &#39;journalctl | grep sshd | grep &quot;Disconnected from&quot;&#39; &gt; ssh.log\n$ less ssh.log\n\n\nThere’s still a lot of noise here. There are a lot of ways to get rid of that, but let’s look at one of the most powerful tools in your toolkit: sed.\nsed is a “stream editor” that builds on top of the old ed editor. In it, you basically give short commands for how to modify the file, rather than manipulate its contents directly (although you can do that too). There are tons of commands, but one of the most common ones is s: substitution. For example, we can write:\nssh myserver journalctl\n | grep sshd\n | grep &quot;Disconnected from&quot;\n | sed &#39;s&#x2F;.*Disconnected from &#x2F;&#x2F;&#39;\n\n\nWhat we just wrote was a simple regular expression; a powerful construct that lets you match text against patterns. The s command is written on the form: s/REGEX/SUBSTITUTION/, where REGEX is the regular expression you want to search for, and SUBSTITUTION is the text you want to substitute matching text with.\n(You may recognize this syntax from the “Search and replace” section of our Vim lecture notes! Indeed, Vim uses a syntax for searching and replacing that is similar to sed’s substitution command. Learning one tool often helps you become more proficient with others.)\nRegular expressionsRegular expressions are common and useful enough that it’s worthwhile to take some time to understand how they work. Let’s start by looking at the one we used above: /.*Disconnected from /. Regular expressions are usually (though not always) surrounded by /. Most ASCII characters just carry their normal meaning, but some characters have “special” matching behavior. Exactly which characters do what vary somewhat between different implementations of regular expressions, which is a source of great frustration. Very common patterns are:\n\n. means “any single character” except newline\n&#96;&#96; zero or more of the preceding match\n+ one or more of the preceding match\n[abc] any one character of a, b, and c\n(RX1|RX2) either something that matches RX1 or RX2\n^ the start of the line\n$ the end of the line\n\nsed’s regular expressions are somewhat weird, and will require you to put a \\ before most of these to give them their special meaning. Or you can pass -E.\nSo, looking back at /.*Disconnected from /, we see that it matches any text that starts with any number of characters, followed by the literal string “Disconnected from ”. Which is what we wanted. But\nbeware, regular expressions are trixy. What if someone tried to log in with the username “Disconnected from”? We’d have:\nJan 17 03:13:00 thesquareplanet.com sshd[2631]: Disconnected from invalid user Disconnected from 46.97.239.16 port 55920 [preauth]\n\n\nWhat would we end up with? Well, * and + are, by default, “greedy”. They will match as much text as they can. So, in the above, we’d end up with just\n46.97.239.16 port 55920 [preauth]\n\n\nWhich may not be what we wanted. In some regular expression implementations, you can just suffix * or + with a ? to make them non-greedy, but sadly sed doesn’t support that. We could switch to perl’s command-line mode though, which does support that construct:\nperl -pe &#39;s&#x2F;.*?Disconnected from &#x2F;&#x2F;&#39;\n\n\nWe’ll stick to sed for the rest of this, because it’s by far the more common tool for these kinds of jobs. sed can also do other handy things like print lines following a given match, do multiple substitutions per invocation, search for things, etc. But we won’t cover that too much here. sed is basically an entire topic in and of itself, but there are often better tools.\nOkay, so we also have a suffix we’d like to get rid of. How might we do that? It’s a little tricky to match just the text that follows the username, especially if the username can have spaces and such! What we need to do is match the whole line:\n| sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user .* [^ ]+ port [0-9]+( \\[preauth\\])?$&#x2F;&#x2F;&#39;\n\n\nLet’s look at what’s going on with a regex debugger. Okay, so the start is still as before. Then, we’re matching any of the “user” variants (there are two prefixes in the logs). Then we’re matching on any string of characters where the username is. Then we’re matching on any single word ([^ ]+; any non-empty sequence of non-space characters). Then the word “port” followed by a sequence of digits. Then possibly the suffix [preauth], and then the end of the line.\nNotice that with this technique, as username of “Disconnected from” won’t confuse us any more. Can you see why?\nThere is one problem with this though, and that is that the entire log becomes empty. We want to keep the username after all. For this, we can use “capture groups”. Any text matched by a regex surrounded by parentheses is stored in a numbered capture group. These are available in the substitution (and in some engines, even in the pattern itself!) as \\1, \\2, \\3, etc. So:\n| sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user (.*) [^ ]+ port [0-9]+( \\[preauth\\])?$&#x2F;\\2&#x2F;&#39;\n\n\nAs you can probably imagine, you can come up with really complicated regular expressions. For example, here’s an article on how you might match an e-mail address. It’s not easy. And there’s lots of discussion. And people have written tests. And test matrices. You can even write a regex for determining if a given number is a prime number.\nRegular expressions are notoriously hard to get right, but they are also very handy to have in your toolbox!\nBack to data wrangling (sed)Okay, so we now have\nssh myserver journalctl\n | grep sshd\n | grep &quot;Disconnected from&quot;\n | sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user (.*) [^ ]+ port [0-9]+( \\[preauth\\])?$&#x2F;\\2&#x2F;&#39;\n\n\nsed can do all sorts of other interesting things, like injecting text (with the i command), explicitly printing lines (with the p command), selecting lines by index, and lots of other things. Check man sed!\nAnyway. What we have now gives us a list of all the usernames that have attempted to log in. But this is pretty unhelpful. Let’s look for common ones:\nssh myserver journalctl\n | grep sshd\n | grep &quot;Disconnected from&quot;\n | sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user (.*) [^ ]+ port [0-9]+( \\[preauth\\])?$&#x2F;\\2&#x2F;&#39;\n | sort | uniq -c\n\n\nsort will, well, sort its input. uniq -c will collapse consecutive lines that are the same into a single line, prefixed with a count of the number of occurrences. We probably want to sort that too and only keep the most common usernames:\nssh myserver journalctl\n | grep sshd\n | grep &quot;Disconnected from&quot;\n | sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user (.*) [^ ]+ port [0-9]+( \\[preauth\\])?$&#x2F;\\2&#x2F;&#39;\n | sort | uniq -c\n | sort -nk1,1 | tail -n10\n\n\nsort -n will sort in numeric (instead of lexicographic) order. -k1,1 means “sort by only the first whitespace-separated column”. The ,n part says “sort until the nth field, where the default is the end of the line. In this particular example, sorting by the whole line wouldn’t matter, but we’re here to learn!\nIf we wanted the least common ones, we could use head instead of tail. There’s also sort -r, which sorts in reverse order.\nOkay, so that’s pretty cool, but what if we’d like these extract only the usernames as a comma-separated list instead of one per line, perhaps for a config file?\nssh myserver journalctl\n | grep sshd\n | grep &quot;Disconnected from&quot;\n | sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user (.*) [^ ]+ port [0-9]+( \\[preauth\\])?$&#x2F;\\2&#x2F;&#39;\n | sort | uniq -c\n | sort -nk1,1 | tail -n10\n | awk &#39;&#123;print $2&#125;&#39; | paste -sd,\n\n\nIf you’re using macOS: note that the command as shown won’t work with the BSD paste shipped with macOS. See exercise 4 from the shell tools lecture for more on the difference between BSD and GNU coreutils and instructions for how to install GNU coreutils on macOS.\nLet’s start with paste: it lets you combine lines (-s) by a given single-character delimiter (-d; , in this case). But what’s this awk business?\nawk – another editor (awk)awk is a programming language that just happens to be really good at processing text streams. There is a lot to say about awk if you were to learn it properly, but as with many other things here, we’ll just go through the basics.\nFirst, what does &#123;print $2&#125; do? Well, awk programs take the form of an optional pattern plus a block saying what to do if the pattern matches a given line. The default pattern (which we used above) matches all lines. Inside the block, $0 is set to the entire line’s contents, and $1 through $n are set to the nth field of that line, when separated by the awk field separator (whitespace by default, change with -F). In this case, we’re saying that, for every line, print the contents of the second field, which happens to be the username!\nLet’s see if we can do something fancier. Let’s compute the number of single-use usernames that start with c and end with e:\n| awk &#39;$1 &#x3D;&#x3D; 1 &amp;&amp; $2 ~ &#x2F;^c[^ ]*e$&#x2F; &#123; print $2 &#125;&#39; | wc -l\n\n\nThere’s a lot to unpack here. First, notice that we now have a pattern (the stuff that goes before &#123;...&#125;). The pattern says that the first field of the line should be equal to 1 (that’s the count from uniq -c), and that the second field should match the given regular expression. And the block just says to print the username. We then count the number of lines in the output with wc -l.\nHowever, awk is a programming language, remember?\nBEGIN &#123; rows &#x3D; 0 &#125;\n$1 &#x3D;&#x3D; 1 &amp;&amp; $2 ~ &#x2F;^c[^ ]*e$&#x2F; &#123; rows +&#x3D; $1 &#125;\nEND &#123; print rows &#125;\n\n\nBEGIN is a pattern that matches the start of the input (and END matches the end). Now, the per-line block just adds the count from the first field (although it’ll always be 1 in this case), and then we print it out at the end. In fact, we could get rid of grep and sed entirely, because awk can do it all, but we’ll leave that as an exercise to the reader.\nAnalyzing dataYou can do math directly in your shell using bc, a calculator that can read from STDIN! For example, add the numbers on each line together by concatenating them together, delimited by +:\n| paste -sd+ | bc -l\n\n\nOr produce more elaborate expressions:\necho &quot;2*($(data | paste -sd+))&quot; | bc -l\n\n\nYou can get stats in a variety of ways. [st](https://github.com/nferraz/st) is pretty neat, but if you already have R:\nssh myserver journalctl\n | grep sshd\n | grep &quot;Disconnected from&quot;\n | sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user (.*) [^ ]+ port [0-9]+( \\[preauth\\])?$&#x2F;\\2&#x2F;&#39;\n | sort | uniq -c\n | awk &#39;&#123;print $1&#125;&#39; | R --no-echo -e &#39;x &lt;- scan(file&#x3D;&quot;stdin&quot;, quiet&#x3D;TRUE); summary(x)&#39;\n\n\nR is another (weird) programming language that’s great at data analysis and plotting. We won’t go into too much detail, but suffice to say that summary prints summary statistics for a vector, and we created a vector containing the input stream of numbers, so R gives us the statistics we wanted!\nIf you just want some simple plotting, gnuplot is your friend:\nssh myserver journalctl\n | grep sshd\n | grep &quot;Disconnected from&quot;\n | sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user (.*) [^ ]+ port [0-9]+( \\[preauth\\])?$&#x2F;\\2&#x2F;&#39;\n | sort | uniq -c\n | sort -nk1,1 | tail -n10\n | gnuplot -p -e &#39;set boxwidth 0.5; plot &quot;-&quot; using 1:xtic(2) with boxes&#39;\n\n\nData wrangling to make arguments (xargs)Sometimes you want to do data wrangling to find things to install or remove based on some longer list. The data wrangling we’ve talked about so far + xargs can be a powerful combo.\nFor example, as seen in lecture, I can use the following command to uninstall old nightly builds of Rust from my system by extracting the old build names using data wrangling tools and then passing them via xargs to the uninstaller:\nrustup toolchain list | grep nightly | grep -vE &quot;nightly-x86&quot; | sed &#39;s&#x2F;-x86.*&#x2F;&#x2F;&#39; | xargs rustup toolchain uninstall\n\n\nWrangling binary dataSo far, we have mostly talked about wrangling textual data, but pipes are just as useful for binary data. For example, we can use ffmpeg to capture an image from our camera, convert it to grayscale, compress it, send it to a remote machine over SSH, decompress it there, make a copy, and then display it.\nffmpeg -loglevel panic -i &#x2F;dev&#x2F;video0 -frames 1 -f image2 -\n | convert - -colorspace gray -\n | gzip\n | ssh mymachine &#39;gzip -d | tee copy.jpg | env DISPLAY&#x3D;:0 feh -&#39;\n\n\nExercises\nTake this short interactive regex tutorial.\n\nFind the number of words (in /usr/share/dict/words) that contain at least three as and don’t have a &#39;s ending. What are the three most common last two letters of those words? sed’s y command, or the tr program, may help you with case insensitivity. How many of those two-letter combinations are there? And for a challenge: which combinations do not occur?\n\nTo do in-place substitution it is quite tempting to do something like sed s/REGEX/SUBSTITUTION/ input.txt &gt; input.txt. However this is a bad idea, why? Is this particular to sed? Use man sed to find out how to accomplish this.\n\nFind your average, median, and max system boot time over the last ten boots. Use journalctl on Linux and log show on macOS, and look for log timestamps near the beginning and end of each boot. On Linux, they may look something like:       \n Logs begin at ...\n\n and\n systemd[577]: Startup finished in ...\n\n On macOS, look for:\n &#x3D;&#x3D;&#x3D; system boot:\n\n and\n Previous shutdown cause: 5\n\n\nLook for boot messages that are not shared between your past three reboots (see journalctl’s b flag). Break this task down into multiple steps. First, find a way to get just the logs from the past three boots. There may be an applicable flag on the tool you use to extract the boot logs, or you can use sed &#39;0,/STRING/d&#39; to remove all lines previous to one that matches STRING. Next, remove any parts of the line that always varies (like the timestamp). Then, de-duplicate the input lines and keep a count of each one (uniq is your friend). And finally, eliminate any line whose count is 3 (since it was shared among all the boots).\n\nFind an online data set like this one, this one, or maybe one from here. Fetch it using curl and extract out just two columns of numerical data. If you’re fetching HTML data, [pup](https://github.com/EricChiang/pup) might be helpful. For JSON data, try [jq](https://stedolan.github.io/jq/). Find the min and max of one column in a single command, and the difference of the sum of each column in another.\n\n\n","dateCreated":"2023-12-12T21:25:52+08:00","dateModified":"2023-12-12T21:35:38+08:00","datePublished":"2023-12-12T21:25:52+08:00","description":"MIT: The Missing Semester of Your CS Education","headline":"Data Wrangling","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://kirk-zhang58.github.io/2023/12/12/MIT_TheMissingSemesterofYourCSEducation/Data%20Wrangling/"},"publisher":{"@type":"Organization","name":"kirkzhang","sameAs":["https://github.com/SimonTeo58","https://stackoverflow.com/users/11289672/simon-teo","https://twitter.com/shiming_kirk","https://www.linkedin.com/in/kirk-zhang-424935235/","zxc741208584@qq.com"],"image":"avatar.jpg","logo":{"@type":"ImageObject","url":"avatar.jpg"}},"url":"https://kirk-zhang58.github.io/2023/12/12/MIT_TheMissingSemesterofYourCSEducation/Data%20Wrangling/"}</script>
    <meta name="description" content="MIT: The Missing Semester of Your CS Education">
<meta property="og:type" content="blog">
<meta property="og:title" content="Data Wrangling">
<meta property="og:url" content="https://kirk-zhang58.github.io/2023/12/12/MIT_TheMissingSemesterofYourCSEducation/Data%20Wrangling/index.html">
<meta property="og:site_name" content="CoffeeMan">
<meta property="og:description" content="MIT: The Missing Semester of Your CS Education">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-12-12T13:25:52.993Z">
<meta property="article:modified_time" content="2023-12-12T13:35:38.613Z">
<meta property="article:author" content="kirkzhang">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@shiming_kirk">
    
        <link rel="publisher" href="https://plus.google.com/nil"/>
    
    
        
    
    
        <meta property="og:image" content="https://kirk-zhang58.github.io/assets/images/avatar.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-enqn8ywxdrgzxevdhlfqryyhvgcrb9sbhlwpkdlid2ghnaolwkvd1xdhq21k.min.css">

    <!--STYLES END-->
    

    

    
        
            
<link rel="stylesheet" href="/assets/css/gitalk.css">

        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            CoffeeMan
        </a>
    </div>
    
        
            <a
                class="header-right-picture open-algolia-search"
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/avatar.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">kirkzhang</h4>
                
                    <h5 class="sidebar-profile-bio"><p>author.bio</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/SimonTeo58"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://stackoverflow.com/users/11289672/simon-teo"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/shiming_kirk"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/in/kirk-zhang-424935235/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/zxc741208584@qq.com"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Data Wrangling
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2023-12-12T21:25:52+08:00">
	
		    Dec 12, 2023
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/linux/">linux</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>MIT: The Missing Semester of Your CS Education</p>
<span id="more"></span>

<h1 id="table-of-contents">Table of Contents</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Data-Wrangling"><span class="toc-text">Data Wrangling</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Regular-expressions"><span class="toc-text">Regular expressions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Back-to-data-wrangling-sed"><span class="toc-text">Back to data wrangling (sed)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#awk-%E2%80%93-another-editor-awk"><span class="toc-text">awk – another editor (awk)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Analyzing-data"><span class="toc-text">Analyzing data</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Data-wrangling-to-make-arguments-xargs"><span class="toc-text">Data wrangling to make arguments (xargs)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Wrangling-binary-data"><span class="toc-text">Wrangling binary data</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Exercises"><span class="toc-text">Exercises</span></a></li></ol>
<h1 id="Data-Wrangling"><a href="#Data-Wrangling" class="headerlink" title="Data Wrangling"></a>Data Wrangling</h1><p><a target="_blank" rel="noopener" href="https://missing.csail.mit.edu/2020/data-wrangling/">https://missing.csail.mit.edu/2020/data-wrangling/</a></p>
<p>Have you ever wanted to take data in one format and turn it into a different format? Of course you have! That, in very general terms, is what this lecture is all about. Specifically, massaging data, whether in text or binary format, until you end up with exactly what you wanted.</p>
<p>We’ve already seen some basic data wrangling in past lectures. Pretty much any time you use the <code>|</code> operator, you are performing some kind of data wrangling. Consider a command like <code>journalctl | grep -i intel</code>. It finds all system log entries that mention Intel (case insensitive). You may not think of it as wrangling data, but it is going from one format (your entire system log) to a format that is more useful to you (just the intel log entries). Most data wrangling is about knowing what tools you have at your disposal, and how to combine them.</p>
<p>Let’s start from the beginning. To wrangle data, we need two things: data to wrangle, and something to do with it. Logs often make for a good use-case, because you often want to investigate things about them, and reading the whole thing isn’t feasible. Let’s figure out who’s trying to log into my server by looking at my server’s log:</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ssh myserver journalctl
</code></pre>

<p>That’s far too much stuff. Let’s limit it to ssh stuff:</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ssh myserver journalctl | grep sshd
</code></pre>

<p>Notice that we’re using a pipe to stream a <em>remote</em> file through <code>grep</code> on our local computer! <code>ssh</code> is magical, and we will talk more about it in the next lecture on the command-line environment. This is still way more stuff than we wanted though. And pretty hard to read. Let’s do better:</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ssh myserver &#39;journalctl | grep sshd | grep &quot;Disconnected from&quot;&#39; | less
</code></pre>

<p>Why the additional quoting? Well, our logs may be quite large, and it’s wasteful to stream it all to our computer and then do the filtering. Instead, we can do the filtering on the remote server, and then massage the data locally. <code>less</code> gives us a “pager” that allows us to scroll up and down through the long output. To save some additional traffic while we debug our command-line, we can even stick the current filtered logs into a file so that we don’t have to access the network while developing:</p>
<pre class="language-none"><code class="language-none">$ ssh myserver &#39;journalctl | grep sshd | grep &quot;Disconnected from&quot;&#39; &gt; ssh.log
$ less ssh.log
</code></pre>

<p>There’s still a lot of noise here. There are <em>a lot</em> of ways to get rid of that, but let’s look at one of the most powerful tools in your toolkit: <code>sed</code>.</p>
<p><code>sed</code> is a “stream editor” that builds on top of the old <code>ed</code> editor. In it, you basically give short commands for how to modify the file, rather than manipulate its contents directly (although you can do that too). There are tons of commands, but one of the most common ones is <code>s</code>: substitution. For example, we can write:</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ssh myserver journalctl
 | grep sshd
 | grep &quot;Disconnected from&quot;
 | sed &#39;s&#x2F;.*Disconnected from &#x2F;&#x2F;&#39;
</code></pre>

<p>What we just wrote was a simple <em>regular expression</em>; a powerful construct that lets you match text against patterns. The <code>s</code> command is written on the form: <code>s/REGEX/SUBSTITUTION/</code>, where <code>REGEX</code> is the regular expression you want to search for, and <code>SUBSTITUTION</code> is the text you want to substitute matching text with.</p>
<p>(You may recognize this syntax from the “Search and replace” section of our Vim <a target="_blank" rel="noopener" href="https://missing.csail.mit.edu/2020/editors/#advanced-vim">lecture notes</a>! Indeed, Vim uses a syntax for searching and replacing that is similar to <code>sed</code>’s substitution command. Learning one tool often helps you become more proficient with others.)</p>
<h2 id="Regular-expressions"><a href="#Regular-expressions" class="headerlink" title="Regular expressions"></a>Regular expressions</h2><p>Regular expressions are common and useful enough that it’s worthwhile to take some time to understand how they work. Let’s start by looking at the one we used above: <code>/.*Disconnected from /</code>. Regular expressions are usually (though not always) surrounded by <code>/</code>. Most ASCII characters just carry their normal meaning, but some characters have “special” matching behavior. Exactly which characters do what vary somewhat between different implementations of regular expressions, which is a source of great frustration. Very common patterns are:</p>
<ul>
<li><code>.</code> means “any single character” except newline</li>
<li>&#96;&#96; zero or more of the preceding match</li>
<li><code>+</code> one or more of the preceding match</li>
<li><code>[abc]</code> any one character of <code>a</code>, <code>b</code>, and <code>c</code></li>
<li><code>(RX1|RX2)</code> either something that matches <code>RX1</code> or <code>RX2</code></li>
<li><code>^</code> the start of the line</li>
<li><code>$</code> the end of the line</li>
</ul>
<p><code>sed</code>’s regular expressions are somewhat weird, and will require you to put a <code>\</code> before most of these to give them their special meaning. Or you can pass <code>-E</code>.</p>
<p>So, looking back at <code>/.*Disconnected from /</code>, we see that it matches any text that starts with any number of characters, followed by the literal string “Disconnected from ”. Which is what we wanted. But</p>
<p>beware, regular expressions are trixy. What if someone tried to log in with the username “Disconnected from”? We’d have:</p>
<pre class="language-none"><code class="language-none">Jan 17 03:13:00 thesquareplanet.com sshd[2631]: Disconnected from invalid user Disconnected from 46.97.239.16 port 55920 [preauth]
</code></pre>

<p>What would we end up with? Well, <code>*</code> and <code>+</code> are, by default, “greedy”. They will match as much text as they can. So, in the above, we’d end up with just</p>
<pre class="language-none"><code class="language-none">46.97.239.16 port 55920 [preauth]
</code></pre>

<p>Which may not be what we wanted. In some regular expression implementations, you can just suffix <code>*</code> or <code>+</code> with a <code>?</code> to make them non-greedy, but sadly <code>sed</code> doesn’t support that. We <em>could</em> switch to perl’s command-line mode though, which <em>does</em> support that construct:</p>
<pre class="language-none"><code class="language-none">perl -pe &#39;s&#x2F;.*?Disconnected from &#x2F;&#x2F;&#39;
</code></pre>

<p>We’ll stick to <code>sed</code> for the rest of this, because it’s by far the more common tool for these kinds of jobs. <code>sed</code> can also do other handy things like print lines following a given match, do multiple substitutions per invocation, search for things, etc. But we won’t cover that too much here. <code>sed</code> is basically an entire topic in and of itself, but there are often better tools.</p>
<p>Okay, so we also have a suffix we’d like to get rid of. How might we do that? It’s a little tricky to match just the text that follows the username, especially if the username can have spaces and such! What we need to do is match the <em>whole</em> line:</p>
<pre class="language-none"><code class="language-none">| sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user .* [^ ]+ port [0-9]+( \[preauth\])?$&#x2F;&#x2F;&#39;
</code></pre>

<p>Let’s look at what’s going on with a <a target="_blank" rel="noopener" href="https://regex101.com/r/qqbZqh/2">regex debugger</a>. Okay, so the start is still as before. Then, we’re matching any of the “user” variants (there are two prefixes in the logs). Then we’re matching on any string of characters where the username is. Then we’re matching on any single word (<code>[^ ]+</code>; any non-empty sequence of non-space characters). Then the word “port” followed by a sequence of digits. Then possibly the suffix <code>[preauth]</code>, and then the end of the line.</p>
<p>Notice that with this technique, as username of “Disconnected from” won’t confuse us any more. Can you see why?</p>
<p>There is one problem with this though, and that is that the entire log becomes empty. We want to <em>keep</em> the username after all. For this, we can use “capture groups”. Any text matched by a regex surrounded by parentheses is stored in a numbered capture group. These are available in the substitution (and in some engines, even in the pattern itself!) as <code>\1</code>, <code>\2</code>, <code>\3</code>, etc. So:</p>
<pre class="language-none"><code class="language-none">| sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user (.*) [^ ]+ port [0-9]+( \[preauth\])?$&#x2F;\2&#x2F;&#39;
</code></pre>

<p>As you can probably imagine, you can come up with <em>really</em> complicated regular expressions. For example, here’s an article on how you might match an <a target="_blank" rel="noopener" href="https://www.regular-expressions.info/email.html">e-mail address</a>. It’s <a target="_blank" rel="noopener" href="https://web.archive.org/web/20221223174323/http://emailregex.com/">not easy</a>. And there’s <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/201323/how-to-validate-an-email-address-using-a-regular-expression/1917982">lots of discussion</a>. And people have <a target="_blank" rel="noopener" href="https://fightingforalostcause.net/content/misc/2006/compare-email-regex.php">written tests</a>. And <a target="_blank" rel="noopener" href="https://mathiasbynens.be/demo/url-regex">test matrices</a>. You can even write a regex for determining if a given number <a target="_blank" rel="noopener" href="https://www.noulakaz.net/2007/03/18/a-regular-expression-to-check-for-prime-numbers/">is a prime number</a>.</p>
<p>Regular expressions are notoriously hard to get right, but they are also very handy to have in your toolbox!</p>
<h2 id="Back-to-data-wrangling-sed"><a href="#Back-to-data-wrangling-sed" class="headerlink" title="Back to data wrangling (sed)"></a>Back to data wrangling (sed)</h2><p>Okay, so we now have</p>
<pre class="language-none"><code class="language-none">ssh myserver journalctl
 | grep sshd
 | grep &quot;Disconnected from&quot;
 | sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user (.*) [^ ]+ port [0-9]+( \[preauth\])?$&#x2F;\2&#x2F;&#39;
</code></pre>

<p><code>sed</code> can do all sorts of other interesting things, like injecting text (with the <code>i</code> command), explicitly printing lines (with the <code>p</code> command), selecting lines by index, and lots of other things. Check <code>man sed</code>!</p>
<p>Anyway. What we have now gives us a list of all the usernames that have attempted to log in. But this is pretty unhelpful. Let’s look for common ones:</p>
<pre class="language-none"><code class="language-none">ssh myserver journalctl
 | grep sshd
 | grep &quot;Disconnected from&quot;
 | sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user (.*) [^ ]+ port [0-9]+( \[preauth\])?$&#x2F;\2&#x2F;&#39;
 | sort | uniq -c
</code></pre>

<p><code>sort</code> will, well, sort its input. <code>uniq -c</code> will collapse consecutive lines that are the same into a single line, prefixed with a count of the number of occurrences. We probably want to sort that too and only keep the most common usernames:</p>
<pre class="language-none"><code class="language-none">ssh myserver journalctl
 | grep sshd
 | grep &quot;Disconnected from&quot;
 | sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user (.*) [^ ]+ port [0-9]+( \[preauth\])?$&#x2F;\2&#x2F;&#39;
 | sort | uniq -c
 | sort -nk1,1 | tail -n10
</code></pre>

<p><code>sort -n</code> will sort in numeric (instead of lexicographic) order. <code>-k1,1</code> means “sort by only the first whitespace-separated column”. The <code>,n</code> part says “sort until the <code>n</code>th field, where the default is the end of the line. In this <em>particular</em> example, sorting by the whole line wouldn’t matter, but we’re here to learn!</p>
<p>If we wanted the <em>least</em> common ones, we could use <code>head</code> instead of <code>tail</code>. There’s also <code>sort -r</code>, which sorts in reverse order.</p>
<p>Okay, so that’s pretty cool, but what if we’d like these extract only the usernames as a comma-separated list instead of one per line, perhaps for a config file?</p>
<pre class="language-none"><code class="language-none">ssh myserver journalctl
 | grep sshd
 | grep &quot;Disconnected from&quot;
 | sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user (.*) [^ ]+ port [0-9]+( \[preauth\])?$&#x2F;\2&#x2F;&#39;
 | sort | uniq -c
 | sort -nk1,1 | tail -n10
 | awk &#39;&#123;print $2&#125;&#39; | paste -sd,
</code></pre>

<p>If you’re using macOS: note that the command as shown won’t work with the BSD <code>paste</code> shipped with macOS. See <a target="_blank" rel="noopener" href="https://missing.csail.mit.edu/2020/shell-tools/#exercises">exercise 4 from the shell tools lecture</a> for more on the difference between BSD and GNU coreutils and instructions for how to install GNU coreutils on macOS.</p>
<p>Let’s start with <code>paste</code>: it lets you combine lines (<code>-s</code>) by a given single-character delimiter (<code>-d</code>; <code>,</code> in this case). But what’s this <code>awk</code> business?</p>
<h2 id="awk-–-another-editor-awk"><a href="#awk-–-another-editor-awk" class="headerlink" title="awk – another editor (awk)"></a>awk – another editor (awk)</h2><p><code>awk</code> is a programming language that just happens to be really good at processing text streams. There is <em>a lot</em> to say about <code>awk</code> if you were to learn it properly, but as with many other things here, we’ll just go through the basics.</p>
<p>First, what does <code>&#123;print $2&#125;</code> do? Well, <code>awk</code> programs take the form of an optional pattern plus a block saying what to do if the pattern matches a given line. The default pattern (which we used above) matches all lines. Inside the block, <code>$0</code> is set to the entire line’s contents, and <code>$1</code> through <code>$n</code> are set to the <code>n</code>th <em>field</em> of that line, when separated by the <code>awk</code> field separator (whitespace by default, change with <code>-F</code>). In this case, we’re saying that, for every line, print the contents of the second field, which happens to be the username!</p>
<p>Let’s see if we can do something fancier. Let’s compute the number of single-use usernames that start with <code>c</code> and end with <code>e</code>:</p>
<pre class="language-none"><code class="language-none">| awk &#39;$1 &#x3D;&#x3D; 1 &amp;&amp; $2 ~ &#x2F;^c[^ ]*e$&#x2F; &#123; print $2 &#125;&#39; | wc -l
</code></pre>

<p>There’s a lot to unpack here. First, notice that we now have a pattern (the stuff that goes before <code>&#123;...&#125;</code>). The pattern says that the first field of the line should be equal to 1 (that’s the count from <code>uniq -c</code>), and that the second field should match the given regular expression. And the block just says to print the username. We then count the number of lines in the output with <code>wc -l</code>.</p>
<p>However, <code>awk</code> is a programming language, remember?</p>
<pre class="language-none"><code class="language-none">BEGIN &#123; rows &#x3D; 0 &#125;
$1 &#x3D;&#x3D; 1 &amp;&amp; $2 ~ &#x2F;^c[^ ]*e$&#x2F; &#123; rows +&#x3D; $1 &#125;
END &#123; print rows &#125;
</code></pre>

<p><code>BEGIN</code> is a pattern that matches the start of the input (and <code>END</code> matches the end). Now, the per-line block just adds the count from the first field (although it’ll always be 1 in this case), and then we print it out at the end. In fact, we <em>could</em> get rid of <code>grep</code> and <code>sed</code> entirely, because <code>awk</code> <a target="_blank" rel="noopener" href="https://backreference.org/2010/02/10/idiomatic-awk/">can do it all</a>, but we’ll leave that as an exercise to the reader.</p>
<h2 id="Analyzing-data"><a href="#Analyzing-data" class="headerlink" title="Analyzing data"></a>Analyzing data</h2><p>You can do math directly in your shell using <code>bc</code>, a calculator that can read from STDIN! For example, add the numbers on each line together by concatenating them together, delimited by <code>+</code>:</p>
<pre class="language-none"><code class="language-none">| paste -sd+ | bc -l
</code></pre>

<p>Or produce more elaborate expressions:</p>
<pre class="language-none"><code class="language-none">echo &quot;2*($(data | paste -sd+))&quot; | bc -l
</code></pre>

<p>You can get stats in a variety of ways. <code>[st](https://github.com/nferraz/st)</code> is pretty neat, but if you already have <a target="_blank" rel="noopener" href="https://www.r-project.org/">R</a>:</p>
<pre class="language-none"><code class="language-none">ssh myserver journalctl
 | grep sshd
 | grep &quot;Disconnected from&quot;
 | sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user (.*) [^ ]+ port [0-9]+( \[preauth\])?$&#x2F;\2&#x2F;&#39;
 | sort | uniq -c
 | awk &#39;&#123;print $1&#125;&#39; | R --no-echo -e &#39;x &lt;- scan(file&#x3D;&quot;stdin&quot;, quiet&#x3D;TRUE); summary(x)&#39;
</code></pre>

<p>R is another (weird) programming language that’s great at data analysis and <a target="_blank" rel="noopener" href="https://ggplot2.tidyverse.org/">plotting</a>. We won’t go into too much detail, but suffice to say that <code>summary</code> prints summary statistics for a vector, and we created a vector containing the input stream of numbers, so R gives us the statistics we wanted!</p>
<p>If you just want some simple plotting, <code>gnuplot</code> is your friend:</p>
<pre class="language-none"><code class="language-none">ssh myserver journalctl
 | grep sshd
 | grep &quot;Disconnected from&quot;
 | sed -E &#39;s&#x2F;.*Disconnected from (invalid |authenticating )?user (.*) [^ ]+ port [0-9]+( \[preauth\])?$&#x2F;\2&#x2F;&#39;
 | sort | uniq -c
 | sort -nk1,1 | tail -n10
 | gnuplot -p -e &#39;set boxwidth 0.5; plot &quot;-&quot; using 1:xtic(2) with boxes&#39;
</code></pre>

<h2 id="Data-wrangling-to-make-arguments-xargs"><a href="#Data-wrangling-to-make-arguments-xargs" class="headerlink" title="Data wrangling to make arguments (xargs)"></a>Data wrangling to make arguments (xargs)</h2><p>Sometimes you want to do data wrangling to find things to install or remove based on some longer list. The data wrangling we’ve talked about so far + <code>xargs</code> can be a powerful combo.</p>
<p>For example, as seen in lecture, I can use the following command to uninstall old nightly builds of Rust from my system by extracting the old build names using data wrangling tools and then passing them via <code>xargs</code> to the uninstaller:</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">rustup toolchain list | grep nightly | grep -vE &quot;nightly-x86&quot; | sed &#39;s&#x2F;-x86.*&#x2F;&#x2F;&#39; | xargs rustup toolchain uninstall
</code></pre>

<h2 id="Wrangling-binary-data"><a href="#Wrangling-binary-data" class="headerlink" title="Wrangling binary data"></a>Wrangling binary data</h2><p>So far, we have mostly talked about wrangling textual data, but pipes are just as useful for binary data. For example, we can use ffmpeg to capture an image from our camera, convert it to grayscale, compress it, send it to a remote machine over SSH, decompress it there, make a copy, and then display it.</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">ffmpeg -loglevel panic -i &#x2F;dev&#x2F;video0 -frames 1 -f image2 -
 | convert - -colorspace gray -
 | gzip
 | ssh mymachine &#39;gzip -d | tee copy.jpg | env DISPLAY&#x3D;:0 feh -&#39;
</code></pre>

<h1 id="Exercises"><a href="#Exercises" class="headerlink" title="Exercises"></a>Exercises</h1><ol>
<li><p>Take this <a target="_blank" rel="noopener" href="https://regexone.com/">short interactive regex tutorial</a>.</p>
</li>
<li><p>Find the number of words (in <code>/usr/share/dict/words</code>) that contain at least three <code>a</code>s and don’t have a <code>&#39;s</code> ending. What are the three most common last two letters of those words? <code>sed</code>’s <code>y</code> command, or the <code>tr</code> program, may help you with case insensitivity. How many of those two-letter combinations are there? And for a challenge: which combinations do not occur?</p>
</li>
<li><p>To do in-place substitution it is quite tempting to do something like <code>sed s/REGEX/SUBSTITUTION/ input.txt &gt; input.txt</code>. However this is a bad idea, why? Is this particular to <code>sed</code>? Use <code>man sed</code> to find out how to accomplish this.</p>
</li>
<li><p>Find your average, median, and max system boot time over the last ten boots. Use <code>journalctl</code> on Linux and <code>log show</code> on macOS, and look for log timestamps near the beginning and end of each boot. On Linux, they may look something like:       </p>
 <pre class="language-none"><code class="language-none">Logs begin at ...
</code></pre>
<p> and</p>
 <pre class="language-none"><code class="language-none">systemd[577]: Startup finished in ...
</code></pre>
<p> On macOS, <a target="_blank" rel="noopener" href="https://eclecticlight.co/2018/03/21/macos-unified-log-3-finding-your-way/">look for</a>:</p>
 <pre class="language-none"><code class="language-none">&#x3D;&#x3D;&#x3D; system boot:
</code></pre>
<p> and</p>
 <pre class="language-none"><code class="language-none">Previous shutdown cause: 5
</code></pre>
</li>
<li><p>Look for boot messages that are <em>not</em> shared between your past three reboots (see <code>journalctl</code>’s <code>b</code> flag). Break this task down into multiple steps. First, find a way to get just the logs from the past three boots. There may be an applicable flag on the tool you use to extract the boot logs, or you can use <code>sed &#39;0,/STRING/d&#39;</code> to remove all lines previous to one that matches <code>STRING</code>. Next, remove any parts of the line that <em>always</em> varies (like the timestamp). Then, de-duplicate the input lines and keep a count of each one (<code>uniq</code> is your friend). And finally, eliminate any line whose count is 3 (since it <em>was</em> shared among all the boots).</p>
</li>
<li><p>Find an online data set like <a target="_blank" rel="noopener" href="https://stats.wikimedia.org/EN/TablesWikipediaZZ.htm">this one</a>, <a target="_blank" rel="noopener" href="https://ucr.fbi.gov/crime-in-the-u.s/2016/crime-in-the-u.s.-2016/topic-pages/tables/table-1">this one</a>, or maybe one <a target="_blank" rel="noopener" href="https://www.springboard.com/blog/data-science/free-public-data-sets-data-science-project/">from here</a>. Fetch it using <code>curl</code> and extract out just two columns of numerical data. If you’re fetching HTML data, <code>[pup](https://github.com/EricChiang/pup)</code> might be helpful. For JSON data, try <code>[jq](https://stedolan.github.io/jq/)</code>. Find the min and max of one column in a single command, and the difference of the sum of each column in another.</p>
</li>
</ol>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2023/12/12/MIT_TheMissingSemesterofYourCSEducation/Course%20overview/"
                    data-tooltip="Course overview + the shell"
                    aria-label="PREVIOUS: Course overview + the shell"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2023/12/12/MIT_TheMissingSemesterofYourCSEducation/Debugging%20and%20Profiling/"
                    data-tooltip="Debugging and Profiling"
                    aria-label="NEXT: Debugging and Profiling"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href=""
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.foo_bar.com/sharer/sharer.php?u=https://kirk-zhang58.github.io/2023/12/12/MIT_TheMissingSemesterofYourCSEducation/Data%20Wrangling/"
                    title="global.share_on_wechat"
                    aria-label="global.share_on_wechat"
                >
                    <i class="fa-foo_bar" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#gitalk"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="Table of Contents">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="gitalk"></div>

            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2023 kirkzhang. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2023/12/12/MIT_TheMissingSemesterofYourCSEducation/Course%20overview/"
                    data-tooltip="Course overview + the shell"
                    aria-label="PREVIOUS: Course overview + the shell"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2023/12/12/MIT_TheMissingSemesterofYourCSEducation/Debugging%20and%20Profiling/"
                    data-tooltip="Debugging and Profiling"
                    aria-label="NEXT: Debugging and Profiling"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href=""
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.foo_bar.com/sharer/sharer.php?u=https://kirk-zhang58.github.io/2023/12/12/MIT_TheMissingSemesterofYourCSEducation/Data%20Wrangling/"
                    title="global.share_on_wechat"
                    aria-label="global.share_on_wechat"
                >
                    <i class="fa-foo_bar" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#gitalk"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="Table of Contents">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="2">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href=""
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.foo_bar.com/sharer/sharer.php?u=https://kirk-zhang58.github.io/2023/12/12/MIT_TheMissingSemesterofYourCSEducation/Data%20Wrangling/"
                        aria-label="global.share_on_wechat"
                    >
                        <i class="fa-foo_bar" aria-hidden="true"></i><span>global.share_on_wechat</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">kirkzhang</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Canton
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-rejca0yeyo8jtv4zo5d19sxydkf6sqbqktdggflqfhvi7djqtgunc35t58di.min.js"></script>

<!--SCRIPTS END-->


    
        
<script src="/assets/js/gitalk.js"></script>

        <script type="text/javascript">
          (function() {
            new Gitalk({
              clientID: 'ca29b9a1203b5920918d',
              clientSecret: 'b1b2a10320acecd54ae9427f140164b2e63d13f5',
              repo: 'SimonTeo58.github.io',
              owner: 'SimonTeo58',
              admin: ['SimonTeo58'],
              id: '2023/12/12/MIT_TheMissingSemesterofYourCSEducation/Data Wrangling/',
              ...{"language":"en","perPage":10,"distractionFreeMode":false,"enableHotKey":true,"pagerDirection":"first"}
            }).render('gitalk')
          })()
        </script>
    




    </body>
</html>
