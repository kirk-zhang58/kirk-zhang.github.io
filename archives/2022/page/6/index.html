
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Eden">
    <title>Archives: 2022 - Eden</title>
    <meta name="author" content="kirkzhang">
    
    
        <link rel="icon" href="https://simonteo58.github.io/assets/images/cover-v1.2.0.jpg">
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Eden">
<meta property="og:url" content="https://simonteo58.github.io/archives/2022/page/6/index.html">
<meta property="og:site_name" content="Eden">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="kirkzhang">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@nil">
    
        <link rel="publisher" href="https://plus.google.com/nil"/>
    
    
        
    
    
        <meta property="og:image" content="https://simonteo58.github.io/assets/images/avatar.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-jtle2hiadqi6creqze7vuhnn9ct7bmrwzzyznr4cpumzvckdy7pw9sbtrdse.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Eden
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/avatar.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">kirkzhang</h4>
                
                    <h5 class="sidebar-profile-bio"><p>author.bio</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/nil"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/nil"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/nil"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/nil"
                            
                            rel="noopener"
                            title="Google +"
                        >
                        <i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google +</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/nil"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/mailto"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/06/23/leetcode/94.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86/"
                            aria-label=": 94.二叉树的中序排序"
                        >
                            94.二叉树的中序排序
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-06-23T00:10:00+08:00">
	
		    Jun 23, 2022
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/leetcode/">leetcode</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <pre class="language-text" data-language="text"><code class="language-text">/*
 * @lc app=leetcode.cn id=94 lang=cpp
 *
 * [94] 二叉树的中序遍历
 *
 * https://leetcode.cn/problems/binary-tree-inorder-traversal/description/
 *
 * algorithms
 * Easy (75.91%)
 * Likes:    1465
 * Dislikes: 0
 * Total Accepted:    855.6K
 * Total Submissions: 1.1M
 * Testcase Example:  '[1,null,2,3]'
 *
 * 给定一个二叉树的根节点 root ，返回 它的 中序 遍历 。
 * 
 * 
 * 
 * 示例 1：
 * 
 * 
 * 输入：root = [1,null,2,3]
 * 输出：[1,3,2]
 * 
 * 
 * 示例 2：
 * 
 * 
 * 输入：root = []
 * 输出：[]
 * 
 * 
 * 示例 3：
 * 
 * 
 * 输入：root = [1]
 * 输出：[1]
 * 
 * 
 * 
 * 
 * 提示：
 * 
 * 
 * 树中节点数目在范围 [0, 100] 内
 * -100 &lt;= Node.val &lt;= 100
 * 
 * 
 * 
 * 
 * 进阶: 递归算法很简单，你可以通过迭代算法完成吗？
 * 
 */
// @lc code=start
/**
 * Definition for a binary tree node.
 * struct TreeNode &#123;
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;
 *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;
 *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;
 * &#125;;
 */
</code></pre>

<pre class="language-cpp" data-language="cpp"><code class="language-cpp">#include&lt;stack&gt;
#include&lt;vector&gt;

 struct TreeNode &#123;
    int val;
      TreeNode *left; 
      TreeNode *right;
      TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;
      TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;
      TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;
 &#125;;

class Solution &#123;
public:
    vector&lt;int&gt; inorderTraversal(TreeNode* root) &#123;
        std::stack&lt;TreeNode*&gt;  treeStack ;
        std::vector&lt;int&gt; nodes;

        while (root || !treeStack.empty())&#123;
            if (root)&#123;
                treeStack.push(root);
                root &#x3D; root-&gt;left;

            &#125;else &#123;
                root &#x3D; treeStack.top();
                treeStack.pop();
                nodes.push_back(root -&gt; val);
                root &#x3D; root -&gt; right;

            &#125;
        &#125;
        return nodes;

    &#125;
&#125;;

&#x2F;&#x2F; @lc code&#x3D;end</code></pre>
                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/06/23/leetcode/94.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/06/22/TED/%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E4%B8%93%E6%B3%A8%E5%8A%9B/"
                            aria-label=": 如何提高专注力-How to Get Your Brain to Focus-TED"
                        >
                            如何提高专注力-How to Get Your Brain to Focus-TED
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-06-22T23:10:43+08:00">
	
		    Jun 22, 2022
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/TED/">TED</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <blockquote>
<p>《How to Get Your Brain to Focus-TED》–TED<br>A few years ago, I began to observe<br>几年前 我开始意识到<br>something in my own behavior<br>我的某些行为<br>that made me a bit uncomfortable.<br>让我有点不舒服<br>And that was that from the moment that I woke up<br>那就是从我起床的那一刻开始<br>to the morning then to the end of the day<br>到一天结束<br>my life was a series of screens.<br>我的生活充斥着各种屏幕<br>I started the day with the thing that woke me up<br>早晨第一个叫醒我的是我的手机<br>first thing in the morning – my phone.<br>我的一天就这么开始了<br>And so I sat there in bed,<br>然后我就坐在床上<br>watching various cooking videos on Instagram<br>在ins上看各种各样的美食视频<br>and bouncing around between a bunch of different applications.<br>在不同的APP之间切换<br>But then, it was time to get out of bed and cook breakfast.<br>接着 我该起床做早饭了<br>And so the thing that I focused then on,<br>于是我关注的对象<br>in addition to the omelette in the pan<br>除了锅里的煎鸡蛋<br>was the iPad that was right next to the oven.<br>还有烤箱边上的iPad<br>And then it was time to do some work.<br>接下来我该去工作了<br>And so I went to a different screen,<br>我又到了另一个设备前<br>which was attached to another screen itself.<br>这个设备也自带一个屏幕<br>All the while this little devil on my wrist was tapping,<br>与此同时 我手腕上的这个小玩意儿 也一直在滴滴答答地响<br>and beeping, and blooping, and distracting me<br>分散着我的注意力<br>as I was trying to get important stuff done.<br>让我无法专心完成重要的工作<br>But there was one particular offender<br>但是在所有的这些设备中<br>out of all of these different devices<br>有一样最烦人<br>that I wasted more time on than anything else<br>浪费我时间最多<br>that was this dastardly thing – my phone.<br>那就是我的手机<br>I can spend hours on this thing every single day,<br>我每天要在上面耗费好几个小时<br>and so I decided to essentially for all intents and purposes<br>因此我决定 无论如何<br>get rid of the thing for a month.<br>要远离手机一个月<br>As an experiment, I thought I’m gonna live on this thing<br>作为试验 我把手机使用时间<br>for just 30 minutes every single day at a maximum.<br>设置为每天最多30分钟<br>And so this is the amount of time I have for maps,<br>每天就最多用这么多时间来查地图<br>this is the amout of time to call my mother,<br>给妈妈打电话<br>this is the amount of time that I have for everything that I could possibly wanna do.<br>这就是做所有我需要做的事情的时间<br>To listen to music, to listen to podcast.<br>听音乐 听广播<br>And I obsevered what happened during this time.<br>然后我观察这段时间发生的事情<br>It took about a week<br>我用了一个星期<br>to adjust downward into a new lower level of stimulation.<br>才把我的大脑调整到这个低刺激状态<br>But once I did,<br>但是我做到了之后<br>I noticed that three curious things began to happen.<br>三件神奇的事情发生了<br>First, my attention span grew.<br>首先 我的注意力持续时间增加了<br>It was like I could focus on things<br>也就是说我能更容易地进入专注状态了<br>not effortlessly but with much more ease<br>不说毫不费劲吧 但的确是比<br>than I could before this experiment started.<br>试验开始前更容易了<br>In addition to this though, as I was going about the world<br>除此之外 当我探索世界时<br>and especially when my mind wandered a bit,<br>特别是大脑有点走神的时候<br>I have more ideas that my mind arrived at.<br>我脑海里会涌现出更多的想法<br>And on top of this<br>而且<br>I had more plans and thoughts about the future.<br>我对未来有了更多的规划和思考<br>Getting rid of one simple device led to these three effects.<br>远离一个设备 就能带来这三点效果<br>Why?<br>为什么呢<br>Noticing this, a few years back led me on this long journey<br>从几年前注意到这点开始 我花了很长时间<br>to get to the bottom of what it takes to focus in a world of distraction.<br>研究如何才能专注 避免被其他事物分散注意力<br>I poured over hundreds of research papers<br>我把成百上千份研究报告铺开<br>from front to back of my office.<br>摊满了我的办公室<br>I don’t know if you’ve ever watched one of those crime shows<br>不知道大家看没看过刑侦节目<br>where somebody’s solving a murder<br>警察在破解谋杀案时<br>and so they have this big bristled board<br>他们在一块巨大的 透明板上系着绳子<br>and their string attached to papers,<br>贴着纸<br>attached to memos, attached to newspaper,<br>备忘录和报纸<br>but this is like what the state of my office was.<br>我的办公室就像那个样子<br>I flew out to meet experts around the world who study focus.<br>我飞到世界各地 去见研究专注力的专家们<br>I conducted more experiments on myself and tell the point.<br>我在自己身上做了更多试验 都指向同一点<br>I have 25,000 words of research notes about<br>我记了两万五千字的研究笔记<br>why this is the case.<br>来分析原因<br>How does technology influence our attention and our ability to focus?<br>科技是如何影响我们的注意力和专注力的<br>I want to start with the attention spans that we have.<br>首先我想讲一讲我们的注意力持续时间<br>This is how we pay attention to the world around us<br>也就是我们如何关注身边的世界<br>and how much control we have over our focus.<br>我们能在多大程度上控制自己的注意力<br>The research around this particular area is fascinating.<br>这个领域的研究令人惊叹<br>It turns out that when we to work in front of a computer<br>原来 当我们在电脑前工作时<br>especially when our phone is nearby,<br>尤其是手机在旁边的时候<br>we focus on one thing for just 40 seconds<br>我们专心做一件事的时间只有40秒<br>before we switch to doing something else.<br>然后就会被其它东西转移注意力<br>And when we have things like Slack open as we are doing some work,<br>而如果我们工作时开着Slack软件<br>this lowers to 35 seconds.<br>专注时间则会下降到35秒<br>But the reason that this is the case is not<br>但是通过这个研究<br>what we might think after looking at the research.<br>我发现原因并不是我们所想的那样<br>We think the problem is that our brains are distracted.<br>我们以为是大脑被分散了注意力<br>But after looking at the research this is what I’ve come to know as a symptom<br>但在读完研究报告后 我认识到这其实是一种征兆<br>for the deeper problem which runs much more deeply.<br>在更深层次的原因之下<br>It’s the root cause of this distraction.<br>有一个关键的问题<br>It’s not that we are distracted. It’s that our brains are over stimulated.<br>我们的大脑并不是被分散了注意力 而是被过度刺激了<br>It’s that we crave distraction in the first place.<br>我们一开始就渴望分心<br>Our brains love these tiny little nuggets of<br>我们的大脑喜欢这些小想法<br>information, and social media, and e-mail,<br>信息 社交媒体 邮件<br>and these things that we do over the course of the day.<br>以及一天里我们所做的所有事情<br>There is even a mechanism in our mind called the “novelty bias”<br>我们大脑里甚至还有一种机制叫做“新奇偏见”<br>by which our mind rewards us with a hit of dopamine,<br>大脑会释放多巴胺<br>one of those wonderful pleasure chemicals,<br>一种令人愉悦的化学物质<br>the same one that we get when we eat and order a whole medium pizza from Domino’s,<br>我们在吃一整块中份披萨<br>that you know the same one that we get when we make love.<br>或者做爱时大脑也会释放同样的多巴胺<br>We get that same stimulation when we check Facebook.<br>我们在刷Facebook时也会得到同样的刺激<br>We get these dopamine coursing through our mind and so we not only crave distraction<br>这些多巴胺在我们大脑中流动 所以我们不仅想要分神<br>but our mind rewards us for seeking out<br>我们大脑还会因为我们的探索而奖励我们<br>and finding distraction in the first place.<br>并且在第一时间找到让我们分神的东西<br>So this is the state of our minds today.<br>这是今天我们大脑的状态<br>We are at these hyper-stimulated state<br>在这样一个超级刺激状态下<br>where we bounce around between this bunch of different objects of attention<br>我们的注意力在不同的对象上不断跳跃<br>that are very very stimulating for our mind.<br>这对我们大脑刺激很大<br>So I thought, OK, if the phone had this impact on my attention span,<br>那么 鉴于手机对我们的注意力有如此大的影响<br>what if I lowered how stimulated I was even more still.<br>如果减少刺激会怎么样呢<br>And so, you know, this feeling that we experience<br>想象一下这种感觉<br>when we go from being in a state of high stimulation to a state of low stimulation,<br>当我们从高刺激状态进入低刺激状态时<br>it has a name. That name is called “boredom”.<br>这个过程有个名字 叫做厌倦<br>You know this is restlessness that we feel<br>你知道这会令我们感到焦躁<br>when we have this super busy week and then we were lying down a couch on a Sunday afternoon<br>忙碌的工作日过后 在一个阳光明媚的下午 躺在沙发上<br>and thinking, “What am I doing now?”<br>然后想：“我接下来要干嘛呢？”<br>So I challenged to put out a call<br>于是我鼓起勇气打了一个电话<br>to the readers on my website and I asked them,<br>打给我网站的读者 我问他们<br>“What is the most boring thing that you can think of doing?<br>“你认为你能想到的最无聊的事是什么<br>I’m gonna make myself bored for an hour a day for a month.”<br>我将在一个月里每天都让自己无聊一个小时”<br>And so I did some stuff that<br>所以接下来我做了这些事情<br>I still upset about from my readers to this day.<br>我到现在都觉得那天我不该问那些读者<br>Day 1 I read the iTunes terms and conditions for one hour.<br>第一天我阅读了一个小时iTunes的使用条款<br>It’s actually shorter and more readable than you might think.<br>其实这个比你想象中更短 更有意思<br>Day 4 I waited on hold of with Air Canada’s baggage claims department.<br>第四天我给加拿大航空公司行李认领部门打了电话<br>It’s very easy this is a trick. If you wanna make yourself bored<br>当你想要无聊的时候 去搞一个这样的恶作剧是很简单的<br>don’t call the reservations department, call the baggage claim people,<br>注意不要打预订部门电话 要打行李认领部门电话<br>‘coz you are gonna wait for hours if you ever get through it all.<br>不然你将会等一个小时 要是你熬得住的话<br>Day 19 I counted all the zeros that I could<br>第19天我数了圆周率前一万位中<br>in the first ten thousand digits of pi.<br>所有零的个数<br>Day 24 I watched a clock<br>第24天我看一个闹钟<br>“tick…tick…” for one hour.<br>滴答……滴答……整整一个小时<br>And 27 other activities this month.<br>还有我这个月的其他27个活动<br>‘Geeze.’ I still think that.<br>现在回想起来都觉得 “哦 天呐”<br>But curiously, I noticed the exact same effects<br>但是神奇的是<br>as I did during the smartphone experiment.<br>这竟和我当初做手机实验时的效果一样<br>It took about a week for my mind<br>我花了一周时间<br>to adjust downward into a newer lower level of stimulation.<br>来把我的大脑调整到低刺激状态<br>And this map curiously on top of research that shows<br>这个实验很神奇的显示了<br>that it takes our mind about 8 days to fully calm down and rest,<br>我们的大脑需要花费大约8天的时间才能平静下来<br>like when we are on a vacation as an example.<br>就像在度假时一样<br>Our vacations need to be longer than they are today.<br>我们的假期应该更长一点<br>But I also noticed that my attention span expanded.<br>我也发现我的注意力提高了<br>I was able to focus even more effortlessly,<br>我更容易集中注意力了<br>because I wasn’t surrounded by fewer distractions,<br>因为我不再被那些能使我分心的事物包围<br>but my mind was so much less stimulated<br>我的大脑不再处于高刺激状态<br>that it did not seek the distraction in the first place.<br>不再容易突然分神<br>But the fun part where these ideas and plans that struck me that didn’t before.<br>有趣的是 我还有了之前没有过的一些想法和计划<br>And the reason that this is the case is because my mind had a chance<br>这是因为我的大脑有机会<br>to wander more often.<br>去思考更多了<br>There is a great quote that I love<br>这里有一句我很喜欢的话<br>that you might be familiar with from J.R.R Tolkien,<br>你们可能知道这句话 J.R.R.托尔金说的<br>where he says that, “Not all those who wander are lost.”<br>“不是所有踌躇的人都迷失了方向”<br>And the exact same thing is true.<br>确实如此<br>It turns out with regard to our focus with regard to our attention.<br>这与我们注意力的集中有关<br>If you think back to when your best most brilliant ideas strike you,<br>你回想一下 除非你有一个绝妙的想法<br>you rarely focused on something.<br>否则你很少在某件事上集中注意力<br>Maybe this morning you were taking a shower,<br>可能你在今天早上洗了一个澡<br>or maybe some morning in the past and<br>或者可能在过去的某一个早晨<br>then your mind had a chance to connect several of the constellations of ideas<br>你的脑海里出现了很多的想法<br>that were swirling around in your mind to create an idea<br>它会在你思考的时候打乱你<br>that would never have materialized otherwise<br>你将永远无法把这些主意具体化<br>if you were focused on something else, on your phone, for example.<br>如果你一直把你的注意力放在其他东西上 比如手机<br>This is a mode especially when we do this deliberately<br>尤其在我们故意这样做的时候 这就变成了一种模式<br>when we deliberately let our mind wander.<br>我们故意让大脑去漫游<br>I called this mode “Scatterfocus”.<br>我将这种模式称为“分散注意力”<br>And the research shows that it lets our mind come up with ideas.<br>这个研究显示它能令你的大脑产生想法<br>It lets our mind plan because of where our mind wanders to.<br>这也能让我们的大脑按我们所想的进行计划<br>This is fascinating.<br>这很吸引人<br>It turns out that when we just let our attention at rest,<br>它显示了当我们让自己的注意力放松时<br>it goes to three main places.<br>大脑会做三件事<br>We think about the past.<br>回忆过去<br>We think about the present.<br>考虑现在<br>And we think about the future.<br>以及思考未来<br>But we think about the past less than we might think,<br>但是我们回忆过去的时间要比我们想象的短<br>only about 12% of the time.<br>仅占我们所想时间的12%<br>And often that time we were recalling ideas<br>回忆过去通常只是<br>in these thoughts wandering episodes.<br>一个小插曲<br>But the present, which is a much more productive place to wander.<br>因为现在更值得去思考<br>We wandered to think about the present 28% of the time,<br>我们用28%的时间来思考现在<br>and so this is, you know it’s something as simple as you’re typing up an e-mail.<br>就像你在写邮件时<br>And you can’t find a way to free something<br>你找不到办法去放松<br>because it’s very delicate maybe it’s political.<br>因为你需要很小心 可能这封邮件是关于政治的<br>You go and walk to another room,<br>你走到其他房间<br>you go to another room of the house, of the office.<br>你走到家里或办公室里的其他房间<br>The solution hits you because your mind had a chance to approach it<br>你突然就有了解决方法 因为你的大脑有机会<br>and prod at that problem from different directions.<br>去看到问题的不同方面<br>But here is the thing.<br>但有一点<br>Our minds wandered to think about the future<br>我们的大脑想要思考更多关于未来的事<br>more than the past and the present combined.<br>比关于过去和现在的事加起来还要多<br>Whenever our mind is wandering we think about the future 48% of the time.<br>无论什么时候 我们大脑所想的48%是关于未来的<br>This is why when we were taking a shower we plan out<br>这就是为什么我们在洗澡的时候<br>our entire day even though it hasn’t started yet.<br>会做一整天的计划 尽管这天还没到来<br>This is called our mind’s “prospective bias”<br>这叫做“预知偏见”<br>and it occurs when our mind wanders.<br>并且在我们神游的时候也会出现<br>If you are good with math, or maths I should say,<br>如果你数学很好的话<br>not in Canada anymore,<br>当然 在加拿大是不可能的<br>these numbers don’t add up to 100<br>这些数字很难加到100<br>because the rest of time our mind is dull.<br>由于我们的大脑在某些时间是迟钝的<br>It’s blank or doesn’t have an idea inside of it that is rooted in time.<br>所以有时候它会是空白的<br>But whatever it is for you that lets your mind wander,<br>但是无论如何 让你的大脑去想<br>something that is simple,<br>一些简单的事情<br>something that doesn’t consume your full attention.<br>不会消耗你全部注意力的事情<br>Mine happens to be something that is not necessarily stereotypical<br>对于我这个年龄和性别来说<br>of my age, and gender, demographic.<br>我有一些奇怪的癖好<br>But I love to knit.<br>我喜欢织毛线<br>Knitting is one of my favorite hobbies.<br>这是我最大的爱好之一<br>I knit in planes. I knit on trains. I knit in hotel rooms.<br>我在飞机上 火车上 在宾馆 我都会织<br>I was knitting in the hotel room before this event today<br>这几天我在住的宾馆里就有织毛线<br>‘coz it helps calm you down. It helps settle your nerves.<br>因为这能让我平静 能减少焦虑<br>And I come up with so many ideas when I knit.<br>我的许多想法都是织毛线的时候想到的<br>I have a notepad next to me.<br>我会在旁边放一本记事本<br>But whatever it is for you,<br>但对你来说可能是别的<br>might be taking an extra long shower, might be taking a bath,<br>可能是洗个很久的淋浴 或是泡澡<br>upgrading your shower to a bath,<br>将淋浴升级为浴缸<br>so you can soak not just with your body but with your ideas as well.<br>你浸透的不仅是身体 还有你的思想<br>Could be simple if you are at work walking from one room to another in the office.<br>工作时从一间办公室走到另外一间<br>Very simple change but if you don’t use your phone during that walk,<br>虽然很简单 但如果你在走路时不使用手机<br>your mind will go to the meeting that you are about to attend.<br>你的头脑将会更专注于即将参加的会议<br>It’ll go to the call that you are just on.<br>它会转移到你刚刚接到的那通电话<br>It’ll wander to the ideas that are circulating.<br>转移到刚刚盘旋在你脑中的想法<br>And it’ll make you more creative in this way.<br>这样你就变得更有创造力了<br>It could be something as simple as waiting in line,<br>这就和排队等候一样简单<br>and just, I don’t know, waiting in line.<br>就像在排队<br>It could be getting a massage and whatever it is that lets your mind<br>可以是做个按摩或者任何能让你大脑放松的事<br>I love this picture so much [chuckle]<br>我超喜欢这张图<br>Whatever you love doing, here is a pro-tip.<br>无论你喜欢做什么 给你一个提示<br>Ask the masseuse to let you have a notepad in the session,<br>在这段时间里叫按摩师给你一个便条<br>because ideas always come to you and you are always incubating things,<br>因为想法一直涌向你 并且你会不断产生新想法<br>and so capture them so you can act upon them later.<br>抓住它们 这样后面你就能行动起来<br>But I think after doing this deep dive into the research,<br>但是在深入研究以后<br>we need to make two fundamental shifts<br>我认为我们需要两个基本的转变<br>with regard to how we think about our intention.<br>关于如何思考我们的目的<br>We think that we need to fit more in,<br>我们认为自己应该更加适应<br>you know, there is all this talk about hustling.<br>你知道很多演讲都是关于奋斗的<br>I’m an anti-hustler.<br>我是一个反对忙碌的人<br>I’m one of the laziest people you’ll ever meet,<br>我是你们见过最懒的人之一<br>and I think that’s what gives me so many ideas to talk and write about.<br>我认为这恰好给了我很多想法去说 去写<br>We don’t need to fit more in.<br>我们不需要再去适应<br>We are doing enough. We are doing too much.<br>我们做的足够了 够多了<br>We are doing so much that our mind never wanders anymore.<br>我们做的如此之多 以至于我们的大脑不再漫游<br>It’s sad. This is when our best ideas and plans come to us.<br>这很可惜 我们本来可以有更好的想法和计划<br>We need more space.<br>我们需要更多空间<br>If you look at what allows traffic to move down the highway,<br>看看高速公路 是什么让交通移动<br>what allows it to move forward isn’t how fast cars are moving as you might expect.<br>不是你以为的车在以多么快的速度前进<br>It’s how much spaces exists between the cars<br>而是车辆之间存在的空间<br>that allows traffic to move forward.<br>这才是让交通向前移动的原因<br>Our work and our life are the same way.<br>我们的工作和生活也是如此<br>The second shift.<br>第二个转变<br>We like to think of distraction as the enemy of focus.<br>我们喜欢把三心二意当做全神贯注的敌人<br>It is not.<br>不是这样的<br>It is the symptom of why we find it difficult to focus,<br>为什么我们很难集中注意力<br>which is the fact that our mind is over stimulated.<br>因为我们大脑被过度刺激了<br>I have a challenge for you.<br>我给你们一个挑战<br>It’s a two-week challenge,<br>一个为期两周的挑战<br>but it’s a challenge to make your mind a bit less stimulated<br>这是个能减少对你大脑的刺激<br>and simply notice what happens to your attention,<br>并且只关注对你注意力影响的挑战<br>how many ideas do you get,<br>你有多少想法<br>how does your focus change,<br>你的注意力是如何转变的<br>how many plans do you make.<br>你制定了多少计划<br>So for two weeks, make your mind less stimulated.<br>所以在两周里 让你的大脑少受刺激<br>There are so many great features on phones and devices<br>在手机上和其他设备上有如此多的诱惑<br>that will let us eliminate a lot of the time we waste on our devices.<br>这会让我们减少大量浪费在这些设备上的时间<br>Use those features, not only to become aware of how you spend your time,<br>使用这些方法 不仅能让你意识到 自己是如何利用时间的<br>but how you can spend less so you have more ideas.<br>而且能让你知道如何产生更多的想法<br>Have a disconnection ritual every evening.<br>每天来个晚上断网仪式<br>One of my favorite daily rituals I disconnect from internet completely from 8pm to 8am.<br>我最喜欢的日常仪式之一 就是晚上八点到早上八点的断网<br>My fiancee and I, we have a weekly disconnection ritual,<br>我和我的未婚妻每周都有一个断网仪式<br>a technology sabbath every Sunday<br>每个星期天的科技安息日<br>so we can disconnect from the digital world<br>这样我们就能与数字世界断开联系<br>and reconnect with the physical world, the real actual world.<br>与物理世界和现实世界重新连接<br>Rediscover boredom. You don’t have to do it for an hour.<br>重新回归到无聊 你不一定要坚持断网满一个小时<br>Please don’t call our Canada, it’s just a world of help.<br>请不要打电话给我们加拿大人 这是一个互相帮助的世界<br>But rediscover boredom, just for a few minutes.<br>重新回归到无聊 即使只有几分钟<br>Lay on the couch and where does your mind go.<br>躺在沙发上 跟着自己的想法走<br>And scatter your attention.<br>分散你的注意力<br>You’ll find some remarkably fruitful things, in that attentional zone.<br>在那个专注的时间段里 你会收获很多<br>If there is one thing that I’ve found to be true<br>在我探索这个世界 关于我们如何集中注意力之后<br>after doing this deep dive into this world on how we focus,<br>如果有一件已经被我证实是正确的事情<br>it’s that state of our attention is what determines the state of our lives.<br>那就是我们注意力的状态决定我们的生活状态<br>If we are distracted in each moment,<br>如果我们与每个瞬间断开联系<br>those moments of distraction and over-stimulation build up and accumulate<br>这些分心和受到过度刺激的瞬间就会累积<br>to create a life that feels more distracted and overwhelming,<br>会制造一个更加容易分心并且疲惫的生活<br>like we don’t have a clear direction.<br>就像我们失去了明确的方向<br>But, when we become less stimulated, when we make our mind more calm,<br>但当我们受到更少的刺激 大脑更加冷静的时候<br>we get the benefits of added productivity and focus on ideas and creativity,<br>我们就能够集中想法和创造力 从而得到益处<br>but we also live a better life because of it.<br>我们也会因此生活的更好<br>Thank you so much!<br>谢谢大家</p>
</blockquote>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/06/22/TED/%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E4%B8%93%E6%B3%A8%E5%8A%9B/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/06/22/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA/"
                            aria-label=": 算法导论"
                        >
                            算法导论
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-06-22T22:07:23+08:00">
	
		    Jun 22, 2022
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="1-1算法"><a href="#1-1算法" class="headerlink" title="1.1算法"></a>1.1算法</h2><p>非正式地讲,算法是任何公认的计算程序,它以一些数值或一组数值作为输入,在一定的时间内产生一些数值或一组数值作为输出.<br>因此,一个算法是一连串的计算步骤.因此,算法是将输入转化为输出的一系列计算步骤.</p>
<p>你也可以把算法看作是解决一个精心设计的计算问题的工具.问题的陈述以一般条款(term)规定了问题实例所需的输入&#x2F;输出关系,<br>通常是任意大的输入.算法描述了一个特定的计算程序,用于实现所有实例的输入&#x2F;输出关系. 进而完成所有问题的输入&#x2F;输出关系.</p>
<p>举个例子,假设你需要将一串数字按单调递增的顺序排序.这个问题在实践中经常出现,并提供了许多标准设计技术和为分析工具提供了肥沃的土壤(提供了很多理论时间机会).下面是我们如何正式确定排序问题的.<br>Input: A sequence of n numbers (a1,a2….ani)<br>Output:一个输入序列的排列组合（重新排序）(a1’,a2’….an’),即(a1’小于 a2’ 小于 …an’)(这表示排序的意思,是一种广义定义)</p>
<h2 id="15-动态规划"><a href="#15-动态规划" class="headerlink" title="15.动态规划"></a>15.动态规划</h2><p>简单讲跟分治方法很像,但是分治是将将问题分解然后一个一个解决,但是动态规划是找子问题重叠的情况,既不同的子问题有公共的子问题,及将子问题求解一遍再将其保存到表格中.传统的递归时间复杂度会有2的N次幂,而用DP改写就会有N的2次幂</p>
<h3 id="15-1-钢条切割"><a href="#15-1-钢条切割" class="headerlink" title="15.1 钢条切割"></a>15.1 钢条切割</h3><p>一个钢条,按照不同长度切割可以卖出不同价格</p>
<table>
<thead>
<tr>
<th>length</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>
<tbody><tr>
<td>price</td>
<td>1</td>
<td>5</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>17</td>
<td>17</td>
<td>20</td>
<td>30</td>
</tr>
</tbody></table>
<ol>
<li><p>传统递归<br>其实是尝试遍了所有的可能性.所以开销很大<br><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a40b543d0ff04056b6813faff9f3c32e~tplv-k3u1fbpfcp-watermark.image" alt="image.png"><br>就如上图,每一个分治就是一种可能</p>
</li>
<li><p>自底向上的动态规划</p>
</li>
</ol>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp">&#x2F;&#x2F; Cut-Rod with bottom-up method
int BottomUpCutRod(const std::vector&lt;int&gt; &amp;p, const int &amp;n)
&#123;
    std::vector&lt;int&gt; r&#123;0&#125;;
    for (auto j &#x3D; 1; j &lt;&#x3D; n; ++j)
    &#123;
        int q &#x3D; INT8_MIN;
        for (auto i &#x3D; 1; i &lt;&#x3D; j; ++i)
        &#123;
            q &#x3D; std::max(q, p.at(i) + r.at(j - i));
        &#125;
        r.push_back(q);
    &#125;
    return r.at(n);
&#125;</code></pre>

<h3 id="15-2-最大子序和"><a href="#15-2-最大子序和" class="headerlink" title="15.2 最大子序和"></a>15.2 最大子序和</h3><p>这道题是来自leetcode.给你一个整数数组 nums,请你找出一个具有最大和的连续子数组（子数组最少包含一个元素）,返回其最大和.子数组 是数组中的一个连续部分.<br><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ecb52e9f8c446efbe01435060ce41c4~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<pre class="language-golang" data-language="golang"><code class="language-golang"> &#x2F;&#x2F; &#123;-2, 1, -3, 4, -1, 2, 1, -5, 4&#125;
func maxSubArray(nums []int) int &#123;


 if len(nums) &#x3D;&#x3D; 0 &#123;
  return 0
 &#125;
 res :&#x3D; -32768
 f_n :&#x3D; -1

 for i :&#x3D; 0; i &lt; len(nums); i++ &#123;
  f_n &#x3D; Max(nums[i], f_n+nums[i])
  res &#x3D; Max(f_n, res)
 &#125;
 return res
&#125;

func Max(a int, b int) int &#123;

 if a &gt;&#x3D; b &#123;
  return a
 &#125;
 return b
&#125;</code></pre>

<p>这里主要是使用了<strong>kadane</strong>算法,使用一个变量跟踪最大值,f_n &#x3D; Max(nums[i], f_n+nums[i])是kadane的核心思想,如果我下个位置的数字大于你们前面的和,说明前面的结果就不是最大整数和</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/06/22/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/06/22/TED/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB/"
                            aria-label=": 如何阅读-TED"
                        >
                            如何阅读-TED
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-06-22T22:05:35+08:00">
	
		    Jun 22, 2022
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/TED/">TED</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <blockquote>
<p>TED<br>1.做笔记</p>
</blockquote>
<p>2.费曼学习法</p>
<p>​ 写下假设找出知识上的差距。<br>3.存档你的笔记</p>
<p>​ 理清框架，并起一个标题</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/06/22/TED/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/06/22/API_design%E5%8E%9F%E5%88%99/"
                            aria-label=": API Design Patterns"
                        >
                            API Design Patterns
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-06-22T21:55:02+08:00">
	
		    Jun 22, 2022
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/WEB-API/">WEB-API</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <span id="more"></span>
<p>API Design Patterns</p>
<!-- more -->
<h2 id="1-API介绍"><a href="#1-API介绍" class="headerlink" title="1. API介绍"></a>1. API介绍</h2><h3 id="1-1-什么是API"><a href="#1-1-什么是API" class="headerlink" title="1.1 什么是API"></a>1.1 什么是API</h3><p>定义一组与系统交互的界面,是的用户有相对较小的权限操作系统</p>
<h3 id="1-2-为什么API重要"><a href="#1-2-为什么API重要" class="headerlink" title="1.2 为什么API重要"></a>1.2 为什么API重要</h3><p>不需要像GUI那样很”cosmetic”</p>
<h3 id="1-3-什么是面向资源API"><a href="#1-3-什么是面向资源API" class="headerlink" title="1.3 什么是面向资源API"></a>1.3 什么是面向资源API</h3><ul>
<li>RPC-API<br>RPC APIs are often designed in terms of interfaces and methods. As more and more of these are added over time, the end result can be an overwhelming and confusing API surface due to the fact that developers must learn each method individually. Obviously this is both time consuming and error-prone.<br>RPC的命名没有严格的要求，无状态的，随着RPC的接口增加，接口管理就会面临混乱结果</li>
<li>HTTP-API<br>The architectural style of REST was introduced, primarily designed to work well with HTTP&#x2F;1.1, but also to help tackle this problem. Its core principle is to define named resources that can be manipulated using a small number of methods. The resources and methods are known as nouns and verbs of APIs. With the HTTP protocol, the resource names naturally map to URLs, and methods naturally map to HTTP methods POST, GET, PUT, PATCH, and DELETE. This results in much fewer things to learn, since developers can focus on the resources and their relationship, and assume that they have the same small number of standard methods.<br>通常url就是资源的映射，对资源的CRUD就是对应HTTP的PATCH,POST,GET DELETE</li>
</ul>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://cloud.google.com/apis/design/resources">https://cloud.google.com/apis/design/resources</a></p>
</blockquote>
<h3 id="1-4-什么是”good”API"><a href="#1-4-什么是”good”API" class="headerlink" title="1.4 什么是”good”API"></a>1.4 什么是”good”API</h3><ul>
<li>Operational<br>你的API必须得work,高效。</li>
<li>Expressive<br>你的method必须是具有描述意义的，告诉用户你能做什么</li>
<li>Simple<br>Another common position on simplicity takes the old saying about the “common<br>case” (“Make the common case fast”) but focuses instead on usability while leaving<br>room for edge cases. This restatement is to “make the common case awesome and the<br>advanced case possible.” This means that whenever you add something that might<br>complicate an API for the benefit of an advanced user, it’s best to keep this complication sufficiently hidden from a typical user only interested in the common case. This<br>keeps the more frequent scenarios simple and easy, while still enabling more<br>advanced features for those who want them</li>
<li>Predictable<br>方法和参数需要见名知意<br>APIs built using well-known, well-defined, clear</li>
</ul>
<h3 id="summary"><a href="#summary" class="headerlink" title="summary"></a>summary</h3><ul>
<li>Interfaces are contracts that define how two systems should interact with one another.</li>
<li>APIs are special types of interfaces that define how two computer systems interact with one another, coming in many forms, such as downloadable libraries and web APIs.</li>
<li>Web APIs are special because they expose functionality over a network, hiding the specific implementation or computational requirements needed for that functionality.</li>
<li>Resource-oriented APIs are a way of designing APIs to reduce complexity byrelying on a standard set of actions, called methods, across a limited set of things, called resources.</li>
<li>What makes APIs “good” is a bit ambiguous, but generally good APIs are operational, expressive, simple, and predictable.</li>
<li>对数据和系统的抽象会决定你的API – 李沐</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/06/22/API_design%E5%8E%9F%E5%88%99/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/06/22/Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%88%87shell%E8%85%B3%E6%9C%AC%E7%B7%A8%E7%A8%8B%E5%A4%A7%E5%85%A8/"
                            aria-label=": Linux命令行与shell腳本編程大全"
                        >
                            Linux命令行与shell腳本編程大全
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-06-22T21:53:01+08:00">
	
		    Jun 22, 2022
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <!-- toc -->
<ul>
<li><a href="#1-linux%E5%85%A5%E9%97%A8">1. linux入门</a></li>
<li><a href="#2-%E8%B5%B0%E8%BF%9Bshell">2. 走进shell</a></li>
<li><a href="#3-%E5%9F%BA%E6%9C%ACshell%E5%91%BD%E4%BB%A4">3. 基本shell命令</a><ul>
<li><a href="#31-%E5%90%AF%E5%8A%A8shell">3.1 启动shell</a></li>
<li><a href="#32-bash-%E6%89%8B%E5%86%8C">3.2 bash 手册</a></li>
<li><a href="#34-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">3.4 文件系统</a></li>
</ul>
</li>
<li><a href="#4-%E5%85%B6%E4%BB%96shell%E5%91%BD%E4%BB%A4">4. 其他shell命令</a><ul>
<li><a href="#41-%E7%9B%91%E6%8E%A7%E7%A8%8B%E5%BA%8F">4.1 监控程序</a><ul>
<li><a href="#411-ps%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B">4.1.1 ps查看进程</a></li>
<li><a href="#412-top%E5%AE%9E%E6%97%B6%E7%9B%91%E6%8E%A7">4.1.2 top实时监控</a></li>
<li><a href="#413-kill%E7%BB%93%E6%9D%9F%E8%BF%9B%E7%A8%8B">4.1.3 kill结束进程</a></li>
<li><a href="#414-%E7%B3%BB%E7%BB%9Fperformance%E7%9B%91%E6%8E%A7">4.1.4 系统performance监控</a></li>
</ul>
</li>
<li><a href="#42-%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E7%9B%91%E6%8E%A7">4.2 磁盘空间监控</a><ul>
<li><a href="#421-mount%E6%8C%82%E5%9C%A8%E5%AD%98%E5%82%A8%E5%AA%92%E4%BD%93">4.2.1 mount挂在存储媒体</a></li>
<li><a href="#422-unmount-%E5%8D%B8%E8%BD%BD%E8%AE%BE%E5%A4%87">4.2.2 unmount 卸载设备</a></li>
<li><a href="#423-df-%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5">4.2.3 df 查看磁盘使用情况</a></li>
<li><a href="#424-du-%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4">4.2.4 du 磁盘空间</a></li>
</ul>
</li>
<li><a href="#43-%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6">4.3 处理文件</a><ul>
<li><a href="#431-sort---%E6%96%87%E4%BB%B6%E6%8E%92%E5%BA%8F">4.3.1 sort - 文件排序</a></li>
<li><a href="#432-grep---%E6%90%9C%E7%B4%A2%E6%96%87%E4%BB%B6">4.3.2 grep - 搜索文件</a></li>
<li><a href="#433-zip--gzipgz-compressz-bzip2bz2-%E5%8E%8B%E7%BC%A9%E6%95%B0%E6%8D%AE">4.3.3 zip , gzip:gz, compress:Z, bzip2:bz2 压缩数据</a></li>
<li><a href="#434-tar-%E5%BD%92%E6%A1%A3%E6%95%B0%E6%8D%AE">4.3.4 tar 归档数据</a></li>
<li><a href="#435-find-%E6%90%9C%E7%B4%A2%E5%91%BD%E4%BB%A4">4.3.5 find 搜索命令</a></li>
<li><a href="#436-uname-%E6%98%BE%E7%A4%BA%E7%B3%BB%E7%BB%9F%E5%86%85%E6%A0%B8%E4%BF%A1%E6%81%AF">4.3.6 uname 显示系统内核信息</a></li>
</ul>
</li>
<li><a href="#44-date%E5%91%BD%E4%BB%A4%E5%8F%8A%E5%85%B6%E6%A0%BC%E5%BC%8F%E5%8C%96">4.4 date命令及其格式化</a></li>
</ul>
</li>
<li><a href="#5-%E7%90%86%E8%A7%A3shell">5. 理解shell</a><ul>
<li><a href="#51-shell%E7%9A%84%E7%B1%BB%E5%9E%8B">5.1 shell的类型</a></li>
<li><a href="#52-shell%E7%9A%84%E7%88%B6%E5%AD%90%E5%85%B3%E7%B3%BB">5.2 shell的父子关系</a><ul>
<li><a href="#521-%E8%BF%9B%E7%A8%8B%E5%88%97%E8%A1%A8">5.2.1 进程列表</a></li>
<li><a href="#522-%E5%AD%90shell%E7%9A%84%E5%85%B6%E4%BB%96%E7%94%A8%E6%B3%95">5.2.2 子shell的其他用法</a></li>
</ul>
</li>
<li><a href="#53-%E7%90%86%E8%A7%A3shell%E7%9A%84%E5%86%85%E5%BB%BA%E5%91%BD%E4%BB%A4">5.3 理解shell的内建命令</a><ul>
<li><a href="#531-%E5%A4%96%E9%83%A8%E5%91%BD%E4%BB%A4">5.3.1 外部命令</a></li>
<li><a href="#532-%E5%86%85%E9%83%A8%E5%91%BD%E4%BB%A4">5.3.2 内部命令</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#6-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">6. 环境变量</a></li>
<li><a href="#7-linux%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90">7. linux文件权限</a><ul>
<li><a href="#71-linux%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7">7.1 linux的安全性</a><ul>
<li><a href="#711-%E6%B7%BB%E5%8A%A0linux%E7%94%A8%E6%88%B7">7.1.1 添加linux用户</a></li>
<li><a href="#712-%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7">7.1.2 删除用户</a></li>
<li><a href="#712-%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7">7.1.2 修改用户</a></li>
</ul>
</li>
<li><a href="#72-%E4%BD%BF%E7%94%A8linux%E7%BB%84">7.2 使用linux组</a></li>
<li><a href="#73-%E7%90%86%E8%A7%A3%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90">7.3 理解文件权限</a></li>
<li><a href="#74-%E6%94%B9%E5%8F%98%E5%AE%89%E5%85%A8%E6%80%A7%E8%AE%BE%E7%BD%AE">7.4 改变安全性设置</a></li>
<li><a href="#75-%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6">7.5 共享文件</a></li>
</ul>
</li>
<li><a href="#9-%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E7%A8%8B%E5%BA%8F">9. 安装软件程序</a><ul>
<li><a href="#91-%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7">9.1 包管理工具</a></li>
<li><a href="#92-%E5%9F%BA%E4%BA%8Edebian%E7%9A%84%E7%B3%BB%E7%BB%9F">9.2 基于Debian的系统</a><ul>
<li><a href="#921-%E7%94%A8aptitude-%E7%AE%A1%E7%90%86%E8%BD%AF%E4%BB%B6%E5%8C%85">9.2.1 用aptitude 管理软件包</a></li>
</ul>
</li>
<li><a href="#93-%E5%9F%BA%E4%BA%8E%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85">9.3 基于源码安装</a></li>
</ul>
</li>
<li><a href="#10-%E4%BD%BF%E7%94%A8%E7%BC%96%E8%BE%91%E5%99%A8">10. 使用编辑器</a><ul>
<li><a href="#101-vim-%E7%BC%96%E8%BE%91%E5%99%A8">10.1 vim 编辑器</a></li>
</ul>
</li>
<li><a href="#11%E5%9F%BA%E6%9C%AC%E8%84%9A%E6%9C%AC">11.基本脚本</a></li>
<li><a href="#12-%E4%BD%BF%E7%94%A8%E7%BB%93%E6%9E%84%E5%8C%96%E5%91%BD%E4%BB%A4">12. 使用结构化命令</a></li>
<li><a href="#13-for-%E5%BE%AA%E7%8E%AF">13. for 循环</a><ul>
<li><a href="#131-for%E5%91%BD%E4%BB%A4">13.1 for命令</a></li>
<li><a href="#132-c%E8%AF%AD%E8%A8%80%E9%A3%8E%E6%A0%BC">13.2 C语言风格</a></li>
<li><a href="#133-while%E8%AF%AD%E5%8F%A5">13.3 while语句</a></li>
<li><a href="#134-until%E5%91%BD%E4%BB%A4">13.4 until命令</a></li>
<li><a href="#135-%E5%BE%AA%E7%8E%AF%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%B9%B6%E4%BB%A5%E7%89%B9%E5%AE%9A%E5%88%86%E9%9A%94%E7%AC%A6%E5%88%86%E5%89%B2%E6%95%B0%E6%8D%AE">13.5 循环处理数据并以特定分隔符分割数据</a></li>
</ul>
</li>
<li><a href="#14-%E5%A4%84%E7%90%86%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5">14. 处理用户输入</a><ul>
<li><a href="#141-%E8%AF%BB%E5%8F%96%E5%8F%82%E6%95%B0%E8%84%9A%E6%9C%AC%E5%90%8D%E5%92%8C%E6%B5%8B%E8%AF%95%E5%8F%82%E6%95%B0">14.1 读取参数，脚本名和测试参数</a></li>
<li><a href="#142-%E5%A4%84%E7%90%86%E9%80%89%E9%A1%B9">14.2 处理选项</a></li>
<li><a href="#143-%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5">14.3 获取用户输入</a></li>
</ul>
</li>
<li><a href="#15-%E5%91%88%E7%8E%B0%E6%95%B0%E6%8D%AE">15. 呈现数据</a><ul>
<li><a href="#151-%E7%90%86%E8%A7%A3%E8%BE%93%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA">15.1 理解输入和输出</a><ul>
<li><a href="#1511-%E6%A0%87%E5%87%86%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6">15.1.1 标准文件描述符</a></li>
<li><a href="#1512-%E9%87%8D%E5%AE%9A%E5%90%91%E9%94%99%E8%AF%AF">15.1.2 重定向错误</a></li>
</ul>
</li>
<li><a href="#152-%E5%9C%A8%E8%84%9A%E6%9C%AC%E4%B8%AD%E9%87%8D%E5%AE%9A%E5%90%91%E8%BE%93%E5%87%BA">15.2 在脚本中重定向输出</a><ul>
<li><a href="#1521-%E4%B8%B4%E6%97%B6%E9%87%8D%E5%AE%9A%E5%90%91">15.2.1 临时重定向</a></li>
<li><a href="#1522-%E6%B0%B8%E4%B9%85%E9%87%8D%E5%AE%9A%E5%90%91">15.2.2 永久重定向</a></li>
</ul>
</li>
<li><a href="#153-%E5%9C%A8%E8%84%9A%E6%9C%AC%E4%B8%AD%E9%87%8D%E5%AE%9A%E5%90%91%E8%BE%93%E5%85%A5">15.3 在脚本中重定向输入</a></li>
<li><a href="#154-%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E9%87%8D%E5%AE%9A%E5%90%91">15.4 创建自己的重定向</a><ul>
<li><a href="#1541-%E5%88%9B%E5%BB%BA%E8%BE%93%E5%87%BA%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6">15.4.1 创建输出文件描述符</a></li>
<li><a href="#1542-%E9%87%8D%E5%AE%9A%E5%90%91%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6">15.4.2 重定向文件描述符</a></li>
<li><a href="#1543-%E5%88%9B%E5%BB%BA%E8%BE%93%E5%85%A5%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6">15.4.3 创建输入文件描述符</a></li>
<li><a href="#1544-%E5%88%9B%E5%BB%BA%E8%AF%BB%E5%86%99%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6">15.4.4 创建读写文件描述符</a></li>
<li><a href="#1545-%E5%85%B3%E9%97%AD%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6">15.4.5 关闭文件描述符</a></li>
</ul>
</li>
<li><a href="#155-%E5%88%97%E5%87%BA%E6%9C%AA%E5%85%B3%E9%97%AD%E7%9A%84%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6">15.5 列出未关闭的文件描述符</a></li>
<li><a href="#156-%E7%BB%84%E7%BB%87%E5%91%BD%E4%BB%A4%E8%BE%93%E5%87%BA">15.6 组织命令输出</a></li>
<li><a href="#157-%E5%88%9B%E5%BB%BA%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6">15.7 创建临时文件</a><ul>
<li><a href="#1571-%E5%88%9B%E5%BB%BA%E6%9C%AC%E5%9C%B0%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6">15.7.1 创建本地临时文件</a></li>
<li><a href="#1572-%E5%9C%A8temp%E5%88%9B%E5%BB%BA%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6">15.7.2 在&#x2F;temp&#x2F;创建临时文件</a></li>
<li><a href="#1573-%E5%88%9B%E5%BB%BA%E4%B8%B4%E6%97%B6%E7%9B%AE%E5%BD%95">15.7.3 创建临时目录</a></li>
</ul>
</li>
<li><a href="#158-%E8%AE%B0%E5%BD%95%E6%B6%88%E6%81%AF">15.8 记录消息</a></li>
<li><a href="#159-%E5%AE%9E%E6%88%98">15.9 实战</a></li>
</ul>
</li>
<li><a href="#16-%E6%8E%A7%E5%88%B6%E8%84%9A%E6%9C%AC">16. 控制脚本</a><ul>
<li><a href="#161-%E5%A4%84%E7%90%86%E4%BF%A1%E5%8F%B7">16.1 处理信号</a><ul>
<li><a href="#1611-%E9%87%8D%E6%B8%A9linux%E4%BF%A1%E5%8F%B7">16.1.1 重温linux信号</a></li>
<li><a href="#1612-%E7%94%9F%E6%88%90%E4%BF%A1%E5%8F%B7">16.1.2 生成信号</a></li>
<li><a href="#1613-%E6%8D%95%E8%8E%B7%E4%BF%A1%E5%8F%B7">16.1.3 捕获信号</a></li>
<li><a href="#1614-%E6%8D%95%E8%8E%B7%E8%84%9A%E6%9C%AC%E9%80%80%E5%87%BA">16.1.4 捕获脚本退出</a></li>
<li><a href="#1615-%E4%BF%AE%E6%94%B9%E6%88%96%E7%A7%BB%E9%99%A4%E6%8D%95%E8%8E%B7">16.1.5 修改或移除捕获</a></li>
</ul>
</li>
<li><a href="#162-%E4%BB%A5%E5%90%8E%E5%8F%B0%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC">16.2 以后台模式运行脚本</a><ul>
<li><a href="#1621-%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC">16.2.1 后台运行脚本</a></li>
<li><a href="#1622-%E8%BF%90%E8%A1%8C%E5%A4%9A%E4%B8%AA%E5%90%8E%E5%8F%B0%E4%BD%9C%E4%B8%9A">16.2.2 运行多个后台作业</a></li>
<li><a href="#1623-%E5%9C%A8%E9%9D%9E%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B8%8B%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F">16.2.3 在非控制台下运行程序</a></li>
</ul>
</li>
<li><a href="#164-%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6">16.4 作业控制</a><ul>
<li><a href="#1641-%E6%9F%A5%E7%9C%8B%E4%BD%9C%E4%B8%9A">16.4.1 查看作业</a></li>
<li><a href="#1642-%E9%87%8D%E5%90%AF%E5%81%9C%E6%AD%A2%E7%9A%84%E4%BD%9C%E4%B8%9A">16.4.2 重启停止的作业</a></li>
</ul>
</li>
<li><a href="#165-%E8%B0%83%E6%95%B4%E8%B0%A6%E8%AE%A9%E5%BA%A6">16.5 调整谦让度</a><ul>
<li><a href="#1651-nice-%E5%91%BD%E4%BB%A4">16.5.1 nice 命令</a></li>
<li><a href="#1652-renice-%E5%91%BD%E4%BB%A4">16.5.2 renice 命令</a></li>
</ul>
</li>
<li><a href="#166-%E5%AE%9A%E6%97%B6%E8%BF%90%E8%A1%8C%E4%BD%9C%E4%B8%9A">16.6 定时运行作业</a><ul>
<li><a href="#1661-%E7%94%A8at%E5%91%BD%E4%BB%A4%E6%9D%A5%E8%AE%A1%E5%88%92%E6%89%A7%E8%A1%8C%E4%BD%9C%E4%B8%9A">16.6.1 用at命令来计划执行作业</a></li>
<li><a href="#1662-%E5%AE%89%E6%8E%92%E9%9C%80%E8%A6%81%E5%AE%9A%E6%9C%9F%E6%89%A7%E8%A1%8C%E7%9A%84%E8%84%9A%E6%9C%AC">16.6.2 安排需要定期执行的脚本</a></li>
<li><a href="#1663-%E4%BD%BF%E7%94%A8%E6%96%B0shell%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC">16.6.3 使用新shell启动脚本</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#17-%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0">17. 创建函数</a><ul>
<li><a href="#171-%E5%9F%BA%E6%9C%AC%E7%9A%84%E8%84%9A%E6%9C%AC%E5%87%BD%E6%95%B0">17.1 基本的脚本函数</a><ul>
<li><a href="#1711-%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0">17.1.1 创建函数</a></li>
<li><a href="#1712-%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0">17.1.2 使用函数</a></li>
</ul>
</li>
<li><a href="#172-%E8%BF%94%E5%9B%9E%E5%80%BC">17.2 返回值</a><ul>
<li><a href="#1721-%E9%BB%98%E8%AE%A4%E9%80%80%E5%87%BA%E7%8A%B6%E6%80%81%E7%A0%81">17.2.1 默认退出状态码</a></li>
<li><a href="#1722-%E4%BD%BF%E7%94%A8return%E5%91%BD%E4%BB%A4">17.2.2 使用return命令</a></li>
<li><a href="#1723-%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E8%BE%93%E5%87%BA">17.2.3 使用函数输出</a></li>
</ul>
</li>
<li><a href="#173-%E5%9C%A8%E5%87%BD%E6%95%B0%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F">17.3 在函数中使用变量</a><ul>
<li><a href="#1731-%E5%90%91%E5%87%BD%E6%95%B0%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0">17.3.1 向函数传递参数</a></li>
<li><a href="#1732-%E5%9C%A8%E5%87%BD%E6%95%B0%E4%B8%AD%E5%A4%84%E7%90%86%E5%8F%98%E9%87%8F">17.3.2 在函数中处理变量</a></li>
</ul>
</li>
<li><a href="#174-%E6%95%B0%E7%BB%84%E5%8F%98%E9%87%8F%E5%92%8C%E5%87%BD%E6%95%B0">17.4 数组变量和函数</a><ul>
<li><a href="#1742-%E4%BB%8E%E5%87%BD%E6%95%B0%E4%B8%AD%E8%BF%94%E5%9B%9E%E6%95%B0%E7%BB%84">17.4.2 从函数中返回数组</a></li>
</ul>
</li>
<li><a href="#175-%E5%87%BD%E6%95%B0%E9%80%92%E5%BD%92">17.5 函数递归</a></li>
<li><a href="#176-%E5%88%9B%E5%BB%BA%E5%BA%93">17.6 创建库</a></li>
<li><a href="#177-%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8A%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0">17.7 在命令行上使用函数</a><ul>
<li><a href="#1771-%E5%9C%A8%E5%91%BD%E4%BB%A4%E4%B8%8A%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0">17.7.1 在命令上创建函数</a></li>
<li><a href="#1772-%E5%9C%A8bashrc-%E6%96%87%E4%BB%B6%E4%B8%AD%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0">17.7.2 在.bashrc 文件中定义函数</a></li>
</ul>
</li>
<li><a href="#178-%E5%AE%9E%E4%BE%8B">17.8 实例</a><ul>
<li><a href="#1781-%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93">17.8.1 下载安装第三方库</a></li>
<li><a href="#1782-%E6%9E%84%E5%BB%BA%E5%BA%93">17.8.2 构建库</a></li>
<li><a href="#1783-shtool%E5%BA%93%E5%87%BD%E6%95%B0">17.8.3 shtool库函数</a></li>
<li><a href="#1784-%E4%BD%BF%E7%94%A8%E5%BA%93">17.8.4 使用库</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#18-%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%95%8C%E9%9D%A2%E4%B8%AD%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B">18. 图形化界面中脚本编程</a></li>
<li><a href="#19%E5%88%9D%E8%AF%86sed%E5%92%8Cgawk">19.初识sed和gawk</a><ul>
<li><a href="#191-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86">19.1 文本处理</a><ul>
<li><a href="#1911-sed%E7%BC%96%E8%BE%91%E5%99%A8">19.1.1 sed编辑器</a></li>
<li><a href="#1912-gawk%E7%A8%8B%E5%BA%8F">19.1.2 gawk程序</a></li>
</ul>
</li>
<li><a href="#192-sed-%E7%BC%96%E8%BE%91%E5%99%A8%E5%9F%BA%E7%A1%80">19.2 sed 编辑器基础</a><ul>
<li><a href="#1921-%E6%9B%B4%E5%A4%9A%E7%9A%84%E6%9B%BF%E6%8D%A2%E9%80%89%E9%A1%B9">19.2.1 更多的替换选项</a></li>
<li><a href="#1922-%E4%BD%BF%E7%94%A8%E5%9C%B0%E5%9D%80">19.2.2 使用地址</a></li>
<li><a href="#1923-%E5%88%A0%E9%99%A4%E8%A1%8C">19.2.3 删除行</a></li>
<li><a href="#1924-%E6%8F%92%E5%85%A5%E5%92%8C%E9%99%84%E5%8A%A0%E6%96%87%E6%9C%AC">19.2.4 插入和附加文本</a></li>
<li><a href="#1925-%E4%BF%AE%E6%94%B9%E8%A1%8C">19.2.5 修改行</a></li>
<li><a href="#1926-%E8%BD%AC%E6%8D%A2%E5%91%BD%E4%BB%A4">19.2.6 转换命令</a></li>
<li><a href="#1927-%E5%9B%9E%E9%A1%BE%E6%89%93%E5%8D%B0">19.2.7 回顾打印</a></li>
<li><a href="#1928-%E4%BD%BF-%E7%94%A8-sed-%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6">19.2.8 使 用 sed 处理文件</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#20%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">20.正则表达式</a><ul>
<li><a href="#201-%E4%BB%80%E4%B9%88%E6%98%AF%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">20.1 什么是正则表达式</a></li>
<li><a href="#202-%E5%AE%9A%E4%B9%89bre%E6%A8%A1%E5%BC%8F">20.2 定义BRE模式</a><ul>
<li><a href="#2021-%E7%BA%AF%E6%96%87%E6%9C%AC">20.2.1. 纯文本</a></li>
<li><a href="#2022-%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6">20.2.2 特殊字符</a></li>
<li><a href="#2023-%E9%94%9A%E5%AE%9A%E5%AD%97%E7%AC%A6">20.2.3 锚定字符</a></li>
<li><a href="#2024-%E7%82%B9%E5%AD%97%E7%AC%A6">20.2.4 点字符</a></li>
<li><a href="#2025-%E5%AD%97%E7%AC%A6%E6%95%B0%E7%BB%84">20.2.5 字符数组</a></li>
<li><a href="#2026-%E6%8E%92%E9%99%A4%E5%9E%8B%E5%AD%97%E7%AC%A6">20.2.6 排除型字符</a></li>
<li><a href="#2027-%E5%8C%BA%E9%97%B4">20.2.7 区间</a></li>
<li><a href="#2028-%E7%89%B9%E6%AE%8A%E7%9A%84%E5%AD%97%E7%AC%A6%E6%95%B0%E7%BB%84">20.2.8 特殊的字符数组</a></li>
<li><a href="#2029-%E6%98%9F%E5%8F%B7">20.2.9 星号</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#appendindex">AppendIndex</a><!-- toc --></li>
</ul>
                    
                        <a
                            href="/2022/06/22/Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%88%87shell%E8%85%B3%E6%9C%AC%E7%B7%A8%E7%A8%8B%E5%A4%A7%E5%85%A8/"
                            class="postShorten-excerpt_link link"
                            aria-label=": Linux命令行与shell腳本編程大全"
                        >
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/06/22/%E9%9A%8F%E7%AC%94/%E5%A6%82%E4%BD%95%E5%9C%A8%E8%AF%BB%E7%A0%94%E7%9A%84%E9%81%93%E8%B7%AF%E4%B8%8A%E5%BF%AB%E9%80%9F%E5%A4%B1%E8%B4%A5/"
                            aria-label=": 如何在读研的道路上快速失败"
                        >
                            如何在读研的道路上快速失败
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-06-22T21:14:38+08:00">
	
		    Jun 22, 2022
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>原创:陈怡然 陈老师有话说</p>
<ol>
<li>为自己找出一堆把其他个人兴趣爱好或者其他事情放在学习之上的理由：比如人活着就是为了享受生活，要事业家庭平衡之类（说真的，这是人生观问题。也许一开始你就根本不需要&#x2F;不应该读研）；</li>
<li>认为很多必须要做的事情或者要解决的问题拖到最后会不了了之、奇迹般迎刃而解、或者导师会忘(这怎么可能)</li>
<li>为导师不经常找自己而沾沾自喜(其实大部分时候那只是因为他觉得不值得在你身上瞎耽误功夫)</li>
<li>花很多时间计算到底怎么做才能快速达到最低毕业要求赶紧毕业（易经：取法乎上，仅得其中；取法乎中，仅得其下)</li>
<li>每次都指望从师兄师姐那里临时榨点什么以混过和导师的1-on-1（以为导师和师兄师姐傻啊？）；</li>
<li>总觉得别人做的东西简单容易上手好发文章，不断在不同的题目中跳来跳去（世上那有什么容易的东西，只有你看不到的努力)</li>
<li>对导师和同学的建议与帮助出于本能的拒绝并试图证明别人是错的(自尊&#x2F;自信&#x2F;自负&#x2F;自卑大多数时候其实我们自己不是那么容易分的清楚，但别人的善心只会offer一次)</li>
<li>总觉得自己比别人聪明，研究做不出来或者文章总不中只是一时粗心或者运气不好(不断重复发生的事情其实就是规律)</li>
<li>在每次觉得做不出来、或者做不完的时候玩消失，或者对更大、更复杂的任务说No（盖章：此人难当大任)</li>
<li>每次都刚刚做到最低要求，把剩余的工作扔给导师或者合作的同学，并为自己节省下的时间和努力沾沾自喜(你可能还没认识到别人对你的支持永远和你自己的付出成正比这一事实)</li>
<li>觉得自己很努力了，但是却怎么也达不到目标或者导师要求(如果确实不是你还有没有挤出来的时间，而你也不愿意承认自己确实不行，那么就多花点时间观察别人学习的方法和效率吧)</li>
<li>开始承认自己确实不行，并把全部精力放在劝说老师降低标准放自己毕业上(你可能没理解这件事情的难度在于你要求他降低的是对所有人的标准，而不单单是对你自己的)</li>
<li>觉得导师是个傻X(这个其实也不是没有可能。强扭的瓜不甜，我支持你用脚投票。或许到时双方都会大大的松了一口气，多年以后江湖再见还能把酒言欢).</li>
</ol>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/06/22/%E9%9A%8F%E7%AC%94/%E5%A6%82%E4%BD%95%E5%9C%A8%E8%AF%BB%E7%A0%94%E7%9A%84%E9%81%93%E8%B7%AF%E4%B8%8A%E5%BF%AB%E9%80%9F%E5%A4%B1%E8%B4%A5/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/06/22/%E9%9D%9E%E6%8A%80%E6%9C%AF%E7%B1%BB/%E4%BB%8E0%E5%88%B01_%E5%BC%80%E5%90%AF%E5%95%86%E4%B8%9A%E4%B8%8E%E6%9C%AA%E6%9D%A5%E7%9A%84%E7%A7%98%E5%AF%86/"
                            aria-label=": 从0到1:开启商业与未来的秘密"
                        >
                            从0到1:开启商业与未来的秘密
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-06-22T20:51:26+08:00">
	
		    Jun 22, 2022
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%E9%9D%9E%E6%8A%80%E6%9C%AF%E7%B1%BB/">非技术类</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="第八章-秘密"><a href="#第八章-秘密" class="headerlink" title="第八章:秘密"></a>第八章:秘密</h2><p>还记得我们的反主流问题吗：在什么重要问题上你与其他人有不同看法？如果我们今天对自然的了解已经达到未来才能达到的程度，如果今天所有的真理已被领悟，如果再无秘密可探索，那么这个问题就寻不到好答案。除非世界上还有秘密有待发现，否则与众不同的想法就毫无意义。 如果世界上还有很多秘密，那就还可能出现很多有望改变世界的企业.</p>
<pre class="language-text" data-language="text"><code class="language-text">作者提出一个模型。 尝试（不是秘密） 困难（有秘密要探索）不可能（验证弦理论），
人们可以完成困难的事情，但是不能完成不可能的事情</code></pre>

<h2 id="8-1-为什么人们不探索发现秘密"><a href="#8-1-为什么人们不探索发现秘密" class="headerlink" title="8.1 为什么人们不探索发现秘密"></a>8.1 为什么人们不探索发现秘密</h2><p>因为人类都愿意悲观的思考问题。四种社会趋势使人们不愿相信秘密</p>
<ol>
<li>渐进主义：从小被教育只要学习考试规定的内容就可以了。不要做“出格”的事情</li>
<li>风险规避： 人之常情，探索秘密就会经历错误的选择。会花费时间思考和纠正。经受制度带来的压力。</li>
<li>自满：既然能享受现有成果，为什么还要探索秘密？</li>
<li>地球的扁平化：人们认为世界是平的，是高度一至的。如果发现新事物，难道世界其他地方的人就没发现吗？鉴于此想法，导致人不愿意去探索</li>
</ol>
<p>我们可以用一种乐观的方式来描述以上这些趋势带来的结果：创立任何狂热教派在今天看来都异想天开。而在40年前，人们更加认同这样一个观点——并不是所有知识都是众所周知的。从共产党到印度教克利须纳派，大多数人认为他们可以加入先锋觉醒组织，以得到一条指引自己前进的道路。如今极少有人对非正统观念持严肃认真的态度，主流认为这是进步的标志。现在，疯狂的异端教派越来越少，我们应该为之感到高兴，但是为了这一收获，我们付出了沉重的代价：丧失了对等待被挖掘的秘密的好奇之心。</p>
<blockquote>
<p>上面内容更像是作者对非主流思想的一种趋向，因为人们认为主流思想才是进步思想，二而对于非正统思想持一种抵触。这样的好处是，疯狂的异教徒少了，但也丢了挖掘秘密的好奇心</p>
</blockquote>
<h2 id="8-2-恪守常规的世界"><a href="#8-2-恪守常规的世界" class="headerlink" title="8.2 恪守常规的世界"></a>8.2 恪守常规的世界</h2><p>不去发现秘密让人们的思想，认识，得不到良序的发展，没有人权，没有更多的自由。世界在发展，还有很多秘密仍需要发展。</p>
<p>例如：在经济学上，因为人们过度相信市场经济，认为市场经济可以调控一切经济活动。但是2008年的经济危机。说明过度相信市场经济，市场泡沫会在某个阶段爆发出来。<br>当一个公司不思进取就会慢慢像惠普一样，慢慢的被时代，环境，对手淘汰掉。</p>
<h2 id="8-3-相信秘密"><a href="#8-3-相信秘密" class="headerlink" title="8.3 相信秘密"></a>8.3 相信秘密</h2><p>事实上还是有很多秘密存在，人们相信秘密的存在。因为这个世界还有很多问题存在，因为问题的存在，以及人们追求高效，简单，快捷处理问题的速求，以及这背后带来的巨大财富，促使人们去寻找解决问题的出路，并坚定的选择去探索秘密。<br>在工程，科学还有很多事情要去做，商业也是如此，它建立在这个世界的开放未知的秘密之上，这个秘密关乎世界如何运作，也是因为相信秘密的存在促成很多大公司的建立，以及源源不断的新公司的成立</p>
<h2 id="8-4-发现秘密"><a href="#8-4-发现秘密" class="headerlink" title="8.4 发现秘密"></a>8.4 发现秘密</h2><ul>
<li>自然的密码</li>
<li>人的秘密</li>
</ul>
<p>当你要创建公司的时候要问自己两个秘密，哪些自然秘密还是未知的，哪些人的秘密是未知的。作者举了个物理学博士面试工程师的故事来说明，不要以为自己理解专业知识丰富而忽略了人的因素.</p>
<pre class="language-text" data-language="text"><code class="language-text">不记得在哪里看到过一句话，做成事情，要满足明面的规则，也要满足潜规则。硬性技能和软技能，都要把握住。</code></pre>

<h2 id="8-5-秘密的作用"><a href="#8-5-秘密的作用" class="headerlink" title="8.5 秘密的作用"></a>8.5 秘密的作用</h2><p>所有伟大的公司都是都是基于鲜为人知的秘密创立的。当你与人分享你的秘密的时候就会招来竞争者</p>
<pre class="language-text" data-language="text"><code class="language-text">当你想阐述的答案与大众价值观相左，就不要人人皆知，和不告诉别人之间有个平衡点，这个平衡点会将帮助你达成目标------ 发现秘密</code></pre>

<p>秘密能将你引向鲜花和掌声，以及带来荣誉，将你带向耀眼月亮。选择那条崎岖，隐晦的路吧。</p>
<h2 id="第九章-基础决定命运"><a href="#第九章-基础决定命运" class="headerlink" title="第九章:基础决定命运"></a>第九章:基础决定命运</h2><p>最近有个想法一直浮现在脑海中“在世界上的所有知识当中，抑或是自己选择的道路所需要的知识，都应该是有个‘根’知识，这个‘根’知识很重要，它是学习其他知识的基础，影响着你吸取其他知识”。一开始就要打好基础，一个一个的过，不要有侥幸心理，在开始做的时候就要做到尽善尽美</p>
<h2 id="9-1-初创时的“联姻”"><a href="#9-1-初创时的“联姻”" class="headerlink" title="9.1 初创时的“联姻”"></a>9.1 初创时的“联姻”</h2><p>如果个人能力不行，就需要与其他人合作，这话说起来简单，但有诸多细节需要探讨，比如这个人的脾气，性格等等。随时都可能导致某人与团队不和，进而使工作无法推荐所以作者在投资一家公司时候会看领导层的硬实力，也就是专业技能，和他们之间的默契程度，他们要有深厚交情.</p>
<h2 id="9-2-所有权，股权，控制权"><a href="#9-2-所有权，股权，控制权" class="headerlink" title="9.2 所有权，股权，控制权"></a>9.2 所有权，股权，控制权</h2><p>要做好这三个权力的分配。如果想控制公司，要保证董事会人数尽可能的少</p>
<h2 id="9-3-要么上车，要么下车"><a href="#9-3-要么上车，要么下车" class="headerlink" title="9.3 要么上车，要么下车"></a>9.3 要么上车，要么下车</h2><p>作者的这个观点我不太认同，那跨国公司，不同国家间不同人群的协同工作，有些公司也可做的很好</p>
<h2 id="9-4-现金奖励不是王道"><a href="#9-4-现金奖励不是王道" class="headerlink" title="9.4 现金奖励不是王道"></a>9.4 现金奖励不是王道</h2><p>这点作者的意思在初创时候，不要给太多的现金来捆绑住员工的忠诚度。因为给的钱多，很可能会将公司掏空.</p>
<h2 id="9-5-股票激励才能使员工全力以赴"><a href="#9-5-股票激励才能使员工全力以赴" class="headerlink" title="9.5 股票激励才能使员工全力以赴"></a>9.5 股票激励才能使员工全力以赴</h2><p>股票流通差，站在员工角度其实就是在赌这个公司的运气，因为公司破产股票就一文不值。站在老板角度就是在让员工与公司共成长。进而也减少现金开销</p>
<h2 id="9-6-让创业延续"><a href="#9-6-让创业延续" class="headerlink" title="9.6 让创业延续"></a>9.6 让创业延续</h2><p>最有价值的公司始终鼓励发明创造，之前度过相关的文章是说微创新，在企业内部创业。如果每次创业实际恰当，使公司向着创新道路发展。进而无限创业下去。  </p>
<blockquote>
<p>居家办公或者在办公室办公也好。大家都会产生些许许摩擦，如何团结团队凝聚力这也是个关键问题，就像是实际工作中，如果把team给你管理，你是否可以推动工作前进呢？需要后面学习别人如何处理团队人事相关问题。别指望少付出还能持续创收，管理会碰到麻烦，但不应害怕，专注解决人，和工作上的问题</p>
</blockquote>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/06/22/%E9%9D%9E%E6%8A%80%E6%9C%AF%E7%B1%BB/%E4%BB%8E0%E5%88%B01_%E5%BC%80%E5%90%AF%E5%95%86%E4%B8%9A%E4%B8%8E%E6%9C%AA%E6%9D%A5%E7%9A%84%E7%A7%98%E5%AF%86/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/06/22/docker%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5/"
                            aria-label=": docker从入门到实践"
                        >
                            docker从入门到实践
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-06-22T20:47:28+08:00">
	
		    Jun 22, 2022
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/CICD/">CICD</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <ul>
<li><a href="#1-%E4%BB%80%E4%B9%88%E6%98%AFdocker">1. 什么是docker</a></li>
<li><a href="#2docker%E9%95%9C%E5%83%8F%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4">2.docker镜像基本概念与基本命令</a><ul>
<li><a href="#21-%E9%95%9C%E5%83%8F%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4">2.1 镜像基本命令</a></li>
<li><a href="#22-%E5%AE%9A%E5%88%B6%E9%95%9C%E5%83%8F">2.2 定制镜像</a><ul>
<li><a href="#221-%E4%BD%BF%E7%94%A8dockerfile%E5%AE%9A%E5%88%B6%E9%95%9C%E5%83%8F">2.2.1 使用Dockerfile定制镜像</a></li>
<li><a href="#222-%E7%9B%B4%E6%8E%A5%E7%94%A8-git-repo%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F">2.2.2 直接用 Git repo构建镜像</a></li>
<li><a href="#223-%E7%94%A8%E7%BD%91%E7%BB%9C%E4%BD%8D%E7%BD%AE%E4%B8%8Atar%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F">2.2.3 用网络位置上tar构建镜像</a></li>
<li><a href="#224-%E4%BB%8E%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%AE%9A%E5%88%B6">2.2.4 从标准输入输出定制</a></li>
<li><a href="#225-%E4%BB%8E%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E4%B8%AD%E8%AF%BB%E5%8F%96%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8E%8B%E7%BC%A9%E5%8C%85%E8%BF%9B%E8%A1%8C%E6%9E%84%E5%BB%BA">2.2.5 从标准输入中读取上下文压缩包进行构建</a></li>
</ul>
</li>
<li><a href="#23-dockerfile%E6%9E%84%E5%BB%BA%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3">2.3 Dockerfile构建命令详解</a><ul>
<li><a href="#231-copy%E5%A4%8D%E5%88%B6">2.3.1 COPY复制</a></li>
<li><a href="#232-add%E6%9B%B4%E9%AB%98%E7%BA%A7%E7%9A%84%E5%A4%8D%E5%88%B6%E5%91%BD%E4%BB%A4">2.3.2 ADD更高级的复制命令</a></li>
<li><a href="#233-cmd%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4">2.3.3 CMD容器启动命令</a></li>
<li><a href="#234-entrypoint-%E5%85%A5%E5%8F%A3%E7%82%B9">2.3.4 ENTRYPOINT 入口点</a></li>
<li><a href="#235-env-%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">2.3.5 ENV 设置环境变量</a></li>
<li><a href="#236-arg-%E6%9E%84%E5%BB%BA%E6%8C%87%E4%BB%A4">2.3.6 ARG 构建指令</a></li>
<li><a href="#237-volume-%E5%AE%9A%E4%B9%89%E5%8C%BF%E5%90%8D%E5%8D%B7">2.3.7 VOLUME 定义匿名卷</a></li>
<li><a href="#238-expose-%E6%9A%B4%E9%9C%B2%E7%AB%AF%E5%8F%A3">2.3.8 EXPOSE 暴露端口</a></li>
<li><a href="#239-workdir-%E6%8C%87%E5%AE%9A%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95">2.3.9 WORKDIR 指定工作目录</a></li>
<li><a href="#2310-user%E6%8C%87%E5%AE%9A%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7">2.3.10 USER指定当前用户</a></li>
<li><a href="#2311-healthcheck-%E5%81%A5%E5%BA%B7%E6%A3%80%E6%9F%A5healthcheck-%E6%94%AF%E6%8C%81%E4%B8%8B%E5%88%97%E9%80%89%E9%A1%B9">2.3.11 HEALTHCHECK 健康检查<code>HEALTHCHECK</code> 支持下列选项</a></li>
<li><a href="#2312-onbuild-%E4%B8%BA%E4%BB%96%E4%BA%BA%E4%BD%9C%E5%AB%81%E8%A1%A3%E8%A3%B3">2.3.12 ONBUILD 为他人作嫁衣裳</a></li>
<li><a href="#2313-label-%E4%B8%BA%E9%95%9C%E5%83%8F%E6%B7%BB%E5%8A%A0%E5%85%83%E6%95%B0%E6%8D%AE">2.3.13 LABEL 为镜像添加元数据</a></li>
<li><a href="#2314-shell%E6%8C%87%E4%BB%A4">2.3.14 shell指令</a></li>
<li><a href="#2315-%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3">2.3.15 参考文档</a></li>
</ul>
</li>
<li><a href="#24-dockerfile-%E5%A4%9A%E9%98%B6%E6%AE%B5%E6%9E%84%E5%BB%BA">2.4 Dockerfile 多阶段构建</a></li>
<li><a href="#%E5%AE%9E%E6%88%98%E5%A4%9A%E9%98%B6%E6%AE%B5%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F">实战多阶段构建镜像</a></li>
<li><a href="#25-%E6%9E%84%E5%BB%BA%E5%A4%9A%E7%A7%8D%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E6%94%AF%E6%8C%81%E7%9A%84docker%E9%95%9C%E5%83%8F">2.5 构建多种系统架构支持的docker镜像</a></li>
<li><a href="#26-%E5%85%B6%E5%AE%83%E5%88%B6%E4%BD%9C%E9%95%9C%E5%83%8F%E7%9A%84%E6%96%B9%E5%BC%8F">2.6 其它制作镜像的方式</a></li>
</ul>
</li>
<li><a href="#3-%E6%93%8D%E4%BD%9C%E5%AE%B9%E5%99%A8">3. 操作容器</a><ul>
<li><a href="#31-%E5%AE%B9%E5%99%A8%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C">3.1 容器基本操作</a></li>
</ul>
</li>
<li><a href="#4-%E8%AE%BF%E9%97%AE%E4%BB%93%E5%BA%93">4. 访问仓库</a></li>
<li><a href="#5-%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86">5. 数据管理</a><ul>
<li><a href="#51-%E6%95%B0%E6%8D%AE%E5%8D%B7">5.1 数据卷</a></li>
<li><a href="#52-%E6%8C%82%E8%BD%BD%E4%B8%BB%E6%9C%BA%E7%9B%AE%E5%BD%95">5.2 挂载主机目录</a></li>
</ul>
</li>
<li><a href="#6-%E7%BD%91%E7%BB%9C">6. 网络</a><ul>
<li><a href="#61-%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84">6.1 端口映射</a></li>
<li><a href="#62-%E5%AE%B9%E5%99%A8%E4%BA%92%E8%81%94">6.2 容器互联</a></li>
<li><a href="#63-%E9%85%8D%E7%BD%AEdns">6.3. 配置DNS</a></li>
</ul>
</li>
<li><a href="#7-%E9%AB%98%E7%BA%A7%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE">7. 高级网络配置</a></li>
<li><a href="#8-docker-buildx">8. Docker Buildx</a></li>
<li><a href="#9-docker-compose">9. Docker Compose</a><ul>
<li><a href="#91-%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAweb%E5%BA%94%E7%94%A8">9.1 搭建一个web应用</a></li>
</ul>
</li>
<li><a href="#10-%E5%AE%89%E5%85%A8">10. 安全</a></li>
<li><a href="#11-%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0">11. 底层实现</a></li>
<li><a href="#12-kubernetes">12. Kubernetes</a></li>
<li><a href="#13-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B---cicd">13. 实战案例 - CI&#x2F;CD</a></li>
</ul>
<h1 id="1-什么是docker"><a href="#1-什么是docker" class="headerlink" title="1. 什么是docker"></a>1. 什么是docker</h1><p>Docker是云技术的一次革新，2013年以Apache协议开源，基于linux内核的<strong>cgroup</strong>,<strong>namespace</strong>以及OverlayFS的<strong>UnionFS</strong>实现，对进程进行封装，属于操作系统层面的虚拟化技术，由于隔离的进程独立于宿主机因此称为容器</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b5d51fa80b2435386d16496375409c2~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/89f40405bc364cd295076c36c9d354e5~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<ul>
<li><p>镜像<br>操作系统分为<code>内核</code>和<code>用户空间</code>，而docker的镜像就是一种特殊的文件系统，除了提供容器运行所需的程序，库，资源，配置等文件外，还包括为运行时准备的的一些配置参数</p>
</li>
<li><p>分层存储<br>Docker 设计时，就充分利用 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Union_mount">Union FS</a> 的技术，将其设计为分层存储的架构。所以严格来说，镜像并非是像一个 <code>ISO</code> 那样的打包文件，镜像只是一个虚拟的概念，其实际体现并非由一个文件组成，而是由一组文件系统组成，或者说，由多层文件系统联合组成。</p>
</li>
<li><p>容器<br>容器跟镜像的关系就像是面向对象中类和实例的概念，容器的实质是进程，与宿主机的进程不同，容器拥有自己独立的命空间，因此拥有自己的root文件系统，自己的网络配置，自己的进程空间，自己的用户id空间。进程是运行在一个隔离的环境里，使用起来，就好像是在一个独立于宿主的系统下操作一样。<br>一个容器运行时，是以镜像为基础层，在其上创建一个当前容器的存储层，我们可以称这个为容器运行时读写而准备的存储层为 <strong>容器存储层</strong><br>容器存储层的生存周期和容器一样，容器消亡时，容器存储层也随之消亡。因此，任何保存于容器存储层的信息都会随容器删除而丢失（后面建议挂载volume）</p>
</li>
<li><p>仓库<br><a target="_blank" rel="noopener" href="https://yeasy.gitbook.io/docker_practice/basic_concept/repository">仓库</a></p>
</li>
</ul>
<h1 id="2-docker镜像基本概念与基本命令"><a href="#2-docker镜像基本概念与基本命令" class="headerlink" title="2.docker镜像基本概念与基本命令"></a>2.docker镜像基本概念与基本命令</h1><h2 id="2-1-镜像基本命令"><a href="#2-1-镜像基本命令" class="headerlink" title="2.1 镜像基本命令"></a>2.1 镜像基本命令</h2><p>拉取镜像:</p>
<ul>
<li>docker pull [OPTION] NAME</li>
</ul>
<pre class="language-text" data-language="text"><code class="language-text">&lt;域名/IP>[:端口号]</code></pre>

<p>运行镜像：</p>
<ul>
<li>docker run -it –rm 镜像 [命令 &#x2F;bin&#x2F;bash]  参数<br>列举镜像：</li>
<li>docker image ls</li>
<li>docker images</li>
<li>docker image ls -f since&#x3D;mongo:3.2 &#x2F;&#x2F;查看某个镜像之前创建的镜像，同理也有查看某个镜像之后的镜像</li>
<li>docker ps &#x3D; docker container ls &#x2F;&#x2F;现实运行中的容器<br>查看镜像体积</li>
<li>docker system df<br>虚悬镜像<br>仓库名和版本号都是none，这是因为新版本的镜像跟旧镜像冲突，，删除虚悬镜像</li>
<li>docker image prune</li>
<li>docker image ls -f dangling&#x3D;true &#x2F;&#x2F;列举虚悬镜像</li>
<li>docker image ls -a &#x2F;&#x2F;有些none镜像不是虚悬镜像是中间镜像<br>以特定格式显示</li>
<li>docker image ls -q</li>
<li><code>docker image ls --format &quot;&#123;&#123; .ID &#125;&#125;:&#123;&#123; .Repository &#125;&#125;&quot; </code> &#x2F;&#x2F;支持go模板用法,方便其他程序调用</li>
<li><code>docker image ls --format &quot;table &#123;&#123; .ID &#125;&#125; \t &#123;&#123; .Repository &#125;&#125; \t &#123;&#123; .Tag &#125;&#125;&quot;</code> &#x2F;&#x2F; 会显示title<br>删除镜像</li>
<li>docker image rm [选项] &lt;镜像1&gt; [&lt;镜像2&gt; …]</li>
<li>docker image rm $(docker image ls -q redis)  &#x2F;&#x2F;使用docker image ls命令配合使用</li>
</ul>
<p>untageged和删除  </p>
<ul>
<li>当该镜像所有的标签都被取消了，该镜像很可能会失去了存在的意义，因此会触发删除行为。镜像是多层存储结构，因此在删除的时候也是从上层向基础层方向依次进行判断删除。镜像的多层结构让镜像复用变得非常容易，因此很有可能某个其它镜像正依赖于当前镜像的某一层。这种情况，依旧不会触发删除该层的行为。直到没有任何层依赖当前层时，才会真实的删除当前层。这就是为什么，有时候会奇怪，为什么明明没有别的标签指向这个镜像，但是它还是存在的原因，也是为什么有时候会发现所删除的层数和自己 <code>docker pull</code> 看到的层数不一样的原因</li>
</ul>
<p>利用commit来持久化容器变化到镜像(黑箱镜)</p>
<pre class="language-Dockerfile" data-language="Dockerfile"><code class="language-Dockerfile">docker commit \
--author &quot;Tao Wang &lt;twang2218@gmail.com&gt;&quot; \
--message &quot;修改了默认网页&quot; \
webserver \
nginx:v2</code></pre>

<ul>
<li><code>docker history</code> 具体查看镜像内的历史记录</li>
</ul>
<h2 id="2-2-定制镜像"><a href="#2-2-定制镜像" class="headerlink" title="2.2 定制镜像"></a>2.2 定制镜像</h2><h3 id="2-2-1-使用Dockerfile定制镜像"><a href="#2-2-1-使用Dockerfile定制镜像" class="headerlink" title="2.2.1 使用Dockerfile定制镜像"></a>2.2.1 使用Dockerfile定制镜像</h3><p><strong>From</strong> 关键字指定基础镜像<br><em><strong>RUN</strong></em> 执行命令,在撰写 Dockerfile 的时候,要经常提醒自己，这并不是在写 Shell 脚本，而是在定义每一层该如何构建，使用docker build 构建编写的Dockerfile  </p>
<blockquote>
<p><code>docker</code> 命令这样的客户端工具，则是通过这组 API 与 Docker 引擎交互，从而完成各种功能,当服务端需要本地文件时候该怎么获得</p>
</blockquote>
<p><em><strong>COPY</strong></em>  复制 <strong>上下文（context）</strong> 目录下的源文件</p>
<blockquote>
<p>COPY .&#x2F;package.json &#x2F;app&#x2F;</p>
</blockquote>
<p>复制 <strong>上下文（context）</strong> 目录下的 <code>package.json</code>,<code>COPY</code> 这类指令中的源文件的路径都是<em>相对路径</em>。现在就可以理解刚才的命令 <code>docker build -t nginx:v3 .</code> 中的这个 <code>.</code>，实际上是在指定上下文的目录，<code>docker build</code> 命令会将该目录下的内容打包交给 Docker 引擎以帮助构建镜像</p>
<ul>
<li>那么为什么会有人误以为 <code>.</code> 是指定 <code>Dockerfile</code> 所在目录呢？这是因为在默认情况下，如果不额外指定 <code>Dockerfile</code> 的话，会将上下文目录下的名为 <code>Dockerfile</code> 的文件作为 Dockerfile</li>
<li>如果目录下有些东西确实不希望构建时传给 Docker 引擎，那么可以用 <code>.gitignore</code> 一样的语法写一个 <code>.dockerignore</code>，该文件是用于剔除不需要作为上下文传递给 Docker 引擎的</li>
<li>实际上 <code>Dockerfile</code> 的文件名并不要求必须为 <code>Dockerfile</code>，而且并不要求必须位于上下文目录中，比如可以用 <code>-f ../Dockerfile.php</code> 参数指定某个文件作为 <code>Dockerfile</code></li>
</ul>
<h3 id="2-2-2-直接用-Git-repo构建镜像"><a href="#2-2-2-直接用-Git-repo构建镜像" class="headerlink" title="2.2.2 直接用 Git repo构建镜像"></a>2.2.2 直接用 Git repo构建镜像</h3><pre class="language-Dockerfile" data-language="Dockerfile"><code class="language-Dockerfile"># $env:DOCKER_BUILDKIT&#x3D;0
# export DOCKER_BUILDKIT&#x3D;0
$ docker build -t hello-world https:&#x2F;&#x2F;github.com&#x2F;docker-library&#x2F;hello-world.git#master:amd64&#x2F;hello-world
Step 1&#x2F;3 : FROM scratch
---&gt;
Step 2&#x2F;3 : COPY hello &#x2F;
---&gt; ac779757d46e
Step 3&#x2F;3 : CMD [&quot;&#x2F;hello&quot;]
---&gt; Running in d2a513a760ed
Removing intermediate container d2a513a760ed
---&gt; 038ad4142d2b
Successfully built 038ad4142d2b</code></pre>

<h3 id="2-2-3-用网络位置上tar构建镜像"><a href="#2-2-3-用网络位置上tar构建镜像" class="headerlink" title="2.2.3 用网络位置上tar构建镜像"></a>2.2.3 用网络位置上tar构建镜像</h3><p>如果所给出的 URL 不是个 Git repo，而是个 <code>tar</code> 压缩包，那么 Docker 引擎会下载这个包，并自动解压缩，以其作为上下文，开始构建.  </p>
<h3 id="2-2-4-从标准输入输出定制"><a href="#2-2-4-从标准输入输出定制" class="headerlink" title="2.2.4 从标准输入输出定制"></a>2.2.4 从标准输入输出定制</h3><p>docker build - &lt; Dockerfile<br>cat Dockerfile | docker build -<br>因为没有上下文，所以Dockerfile里面不可以使用<code>copy</code>  </p>
<h3 id="2-2-5-从标准输入中读取上下文压缩包进行构建"><a href="#2-2-5-从标准输入中读取上下文压缩包进行构建" class="headerlink" title="2.2.5 从标准输入中读取上下文压缩包进行构建"></a>2.2.5 从标准输入中读取上下文压缩包进行构建</h3><p>docker build - &lt; context.tar.gz<br>说白了就是解压后进行构建</p>
<h2 id="2-3-Dockerfile构建命令详解"><a href="#2-3-Dockerfile构建命令详解" class="headerlink" title="2.3 Dockerfile构建命令详解"></a>2.3 Dockerfile构建命令详解</h2><h3 id="2-3-1-COPY复制"><a href="#2-3-1-COPY复制" class="headerlink" title="2.3.1 COPY复制"></a>2.3.1 COPY复制</h3><ul>
<li>将上下文目录的文件复制到容器中的对应的目录下</li>
<li>支持通配符</li>
<li>源路径是相对路径，目标路径支持绝对路径</li>
<li><code>COPY</code> 指令，源文件的各种元数据都会保留。比如读、写、执行权限、文件变更时间等。这个特性对于镜像定制很有用。特别是构建相关文件都在使用 Git 进行管理的时候</li>
<li>example</li>
</ul>
<pre class="language-Dockerfile" data-language="Dockerfile"><code class="language-Dockerfile">COPY requirements.txt &#x2F;code  &#x2F;&#x2F;copy 文件到容器中的&#x2F;code目录下</code></pre>

<h3 id="2-3-2-ADD更高级的复制命令"><a href="#2-3-2-ADD更高级的复制命令" class="headerlink" title="2.3.2 ADD更高级的复制命令"></a>2.3.2 ADD更高级的复制命令</h3><ul>
<li>源路径是tar包会在目标路径下解压(非常实用)</li>
<li><code>ADD</code> 指令会令镜像构建缓存失效，从而可能会令镜像构建变得比较缓慢</li>
<li><code>--chown=&lt;user&gt;:&lt;group&gt;</code> 选项来改变文件的所属用户及所属组</li>
</ul>
<pre class="language-none"><code class="language-none">ADD --chown&#x3D;55:mygroup files* &#x2F;mydir&#x2F;
ADD --chown&#x3D;bin files* &#x2F;mydir&#x2F;
ADD --chown&#x3D;1 files* &#x2F;mydir&#x2F;
ADD --chown&#x3D;10:11 files* &#x2F;mydir&#x2F;</code></pre>

<h3 id="2-3-3-CMD容器启动命令"><a href="#2-3-3-CMD容器启动命令" class="headerlink" title="2.3.3 CMD容器启动命令"></a>2.3.3 CMD容器启动命令</h3><p>容器既然是进程，那么启动时就需要指定运行参数  </p>
<ul>
<li>example<br><code>CMD [ &quot;sh&quot;, &quot;-c&quot;, &quot;echo $HOME&quot; ]</code></li>
</ul>
<pre class="language-Dockerfile" data-language="Dockerfile"><code class="language-Dockerfile">FROM ubuntu:18.04
RUN apt-get update \
&amp;&amp; apt-get install -y curl \
&amp;&amp; rm -rf &#x2F;var&#x2F;lib&#x2F;apt&#x2F;lists&#x2F;*
CMD [ &quot;curl&quot;, &quot;-s&quot;, &quot;http:&#x2F;&#x2F;myip.ipip.net&quot; ]</code></pre>

<p>这个时候运行容器，docker run myip 就会打印ip相关信息，但是如果你想加参数<code>-i</code>，以如下方式<br><code>docker run myip -i</code> 就会报错，因为myip后面传入的参数会被认为是命令，而正确是的方式是<br><code>docker run myip curl -s http://myip.ipip.net -i</code>，显然这不是一个好的方案。可以使用2.3.4的参数来设计</p>
<h3 id="2-3-4-ENTRYPOINT-入口点"><a href="#2-3-4-ENTRYPOINT-入口点" class="headerlink" title="2.3.4 ENTRYPOINT 入口点"></a>2.3.4 ENTRYPOINT 入口点</h3><p><code>ENTRYPOINT</code> 的目的和 <code>CMD</code> 一样，都是在指定容器启动程序及参数,例子如下</p>
<ul>
<li>场景一:让镜像像命令一样使用<code>ENTRYPOINT</code></li>
</ul>
<pre class="language-Dockerfile" data-language="Dockerfile"><code class="language-Dockerfile">FROM ubuntu:18.04
RUN apt-get update \
&amp;&amp; apt-get install -y curl \
&amp;&amp; rm -rf &#x2F;var&#x2F;lib&#x2F;apt&#x2F;lists&#x2F;*
ENTRYPOINT [ &quot;curl&quot;, &quot;-s&quot;, &quot;http:&#x2F;&#x2F;myip.ipip.net&quot; ]
&#x2F;&#x2F;再次尝试跑 docker run myip -i，就会将-i作为参数传给curl命令</code></pre>

<ul>
<li>场景二: 应用运行前的准备工作<br>比如 <code>mysql</code> 类的数据库，可能需要一些数据库配置、初始化的工作，这些工作要在最终的 mysql 服务器运行之前解决。</li>
</ul>
<pre class="language-Dockerfile" data-language="Dockerfile"><code class="language-Dockerfile">FROM alpine:3.4
RUN addgroup -S redis &amp;&amp; adduser -S -G redis redis
ENTRYPOINT [&quot;docker-entrypoint.sh&quot;]
EXPOSE 6379
CMD [ &quot;redis-server&quot; ]
&#x2F;&#x2F;redis服务创建了redis用户，并在最后ENTRYPOINT指定了entrypoint.sh的脚本,该脚本的内容就是根据CMD的内容
&#x2F;&#x2F;来判断，如果是redis-server的话，则切换到redis用户身份启动服务器，否则依旧使用root身份执行。比如：</code></pre>

<h3 id="2-3-5-ENV-设置环境变量"><a href="#2-3-5-ENV-设置环境变量" class="headerlink" title="2.3.5 ENV 设置环境变量"></a>2.3.5 ENV 设置环境变量</h3><p>可以为后面的RUN命令提供环境变量，是以键值对的形式存在，如果value部分有空格，需要使用双引号括起来</p>
<h3 id="2-3-6-ARG-构建指令"><a href="#2-3-6-ARG-构建指令" class="headerlink" title="2.3.6 ARG 构建指令"></a>2.3.6 ARG 构建指令</h3><p>ARG指令有生效范围，如果在FROM之前指定的，那么只能用于<code>FROM</code>指令中</p>
<pre class="language-Dockerfile" data-language="Dockerfile"><code class="language-Dockerfile">ARG DOCKER_USERNAME&#x3D;library
FROM $&#123;DOCKER_USERNAME&#125;&#x2F;alpine
RUN set -x ; echo $&#123;DOCKER_USERNAME&#125;</code></pre>

<p><code>RUN</code>拿不到变量值，要想使用只能是在<code>FROM</code>命令后面重新指定<code>ARG</code>,多阶段构建需要指定各个阶段的<code>ARG</code></p>
<h3 id="2-3-7-VOLUME-定义匿名卷"><a href="#2-3-7-VOLUME-定义匿名卷" class="headerlink" title="2.3.7 VOLUME 定义匿名卷"></a>2.3.7 VOLUME 定义匿名卷</h3><p><code>VOLUME /data</code> 挂在匿名卷,向容器&#x2F;data写入的数据最终会落入host磁盘<br><code>$ docker run -d -v mydata:/data xxxx</code><br>就使用了 <code>mydata</code> 这个命名卷挂载到了 <code>/data</code> 这个位置，替代了 <code>Dockerfile</code> 中定义的匿名卷的挂载配置</p>
<h3 id="2-3-8-EXPOSE-暴露端口"><a href="#2-3-8-EXPOSE-暴露端口" class="headerlink" title="2.3.8 EXPOSE 暴露端口"></a>2.3.8 EXPOSE 暴露端口</h3><p>与-p &lt;宿主端口&gt;:&lt;容器端口&gt;, 映射端口不通，EXPOSE是暴漏容器端口给其他容器</p>
<h3 id="2-3-9-WORKDIR-指定工作目录"><a href="#2-3-9-WORKDIR-指定工作目录" class="headerlink" title="2.3.9 WORKDIR 指定工作目录"></a>2.3.9 WORKDIR 指定工作目录</h3><p>使用 <code>WORKDIR</code> 指令可以来指定工作目录（或者称为当前目录），以后各层的当前目录就被改为指定的目录，如该目录不存在，<code>WORKDIR</code> 会帮你建立目录</p>
<h3 id="2-3-10-USER指定当前用户"><a href="#2-3-10-USER指定当前用户" class="headerlink" title="2.3.10 USER指定当前用户"></a>2.3.10 USER指定当前用户</h3><p><code>USER</code> 只是帮助你切换到指定用户而已，这个用户必须是事先建立好的，否则无法切换。</p>
<h3 id="2-3-11-HEALTHCHECK-健康检查HEALTHCHECK-支持下列选项"><a href="#2-3-11-HEALTHCHECK-健康检查HEALTHCHECK-支持下列选项" class="headerlink" title="2.3.11 HEALTHCHECK 健康检查HEALTHCHECK 支持下列选项"></a>2.3.11 HEALTHCHECK 健康检查<code>HEALTHCHECK</code> 支持下列选项</h3><ul>
<li><code>--interval=&lt;间隔&gt;</code>：两次健康检查的间隔，默认为 30 秒；</li>
<li><code>--timeout=&lt;时长&gt;</code>：健康检查命令运行超时时间，如果超过这个时间，本次健康检查就被视为失败，默认 30 秒；</li>
<li><code>--retries=&lt;次数&gt;</code>：当连续失败指定次数后，则将容器状态视为 <code>unhealthy</code>，默认 3 次。</li>
</ul>
<pre class="language-Dockerfile" data-language="Dockerfile"><code class="language-Dockerfile">FROM nginx
RUN apt-get update &amp;&amp; apt-get install -y curl &amp;&amp; rm -rf &#x2F;var&#x2F;lib&#x2F;apt&#x2F;lists&#x2F;*
HEALTHCHECK --interval&#x3D;5s --timeout&#x3D;3s \
CMD curl -fs http:&#x2F;&#x2F;localhost&#x2F; || exit 1

&#x2F;&#x2F;这里我们设置了每 5 秒检查一次（这里为了试验所以间隔非常短，实际应该相对较长），
&#x2F;&#x2F;如果健康检查命令超过 3 &#x2F;&#x2F;秒没响应就视为失败，并且使用 &#96;curl -fs http:&#x2F;&#x2F;localhost&#x2F; || exit 1&#96;
&#x2F;&#x2F;作为健康检查命令。</code></pre>

<h3 id="2-3-12-ONBUILD-为他人作嫁衣裳"><a href="#2-3-12-ONBUILD-为他人作嫁衣裳" class="headerlink" title="2.3.12 ONBUILD 为他人作嫁衣裳"></a>2.3.12 ONBUILD 为他人作嫁衣裳</h3><h3 id="2-3-13-LABEL-为镜像添加元数据"><a href="#2-3-13-LABEL-为镜像添加元数据" class="headerlink" title="2.3.13 LABEL 为镜像添加元数据"></a>2.3.13 LABEL 为镜像添加元数据</h3><p>我们还可以用一些标签来申明镜像的作者、文档地址等：</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">LABEL org.opencontainers.image.authors&#x3D;&quot;yeasy&quot;
LABEL org.opencontainers.image.documentation&#x3D;&quot;https:&#x2F;&#x2F;yeasy.gitbooks.io&quot;</code></pre>

<h3 id="2-3-14-shell指令"><a href="#2-3-14-shell指令" class="headerlink" title="2.3.14 shell指令"></a>2.3.14 shell指令</h3><p><code>SHELL</code> 指令可以指定 <code>RUN</code> <code>ENTRYPOINT</code> <code>CMD</code> 指令的 shell程序，Linux 中默认为 <code>[&quot;/bin/sh&quot;, &quot;-c&quot;]</code></p>
<h3 id="2-3-15-参考文档"><a href="#2-3-15-参考文档" class="headerlink" title="2.3.15 参考文档"></a>2.3.15 参考文档</h3><ul>
<li><p><code>Dockerfie</code> 官方文档：<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/builder/">https://docs.docker.com/engine/reference/builder/</a></p>
</li>
<li><p><code>Dockerfile</code> 最佳实践文档：<a target="_blank" rel="noopener" href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/">https://docs.docker.com/develop/develop-images/dockerfile_best-practices/</a></p>
</li>
<li><p><code>Docker</code> 官方镜像 <code>Dockerfile</code>：<a target="_blank" rel="noopener" href="https://github.com/docker-library/docs">https://github.com/docker-library/docs</a></p>
</li>
</ul>
<h2 id="2-4-Dockerfile-多阶段构建"><a href="#2-4-Dockerfile-多阶段构建" class="headerlink" title="2.4 Dockerfile 多阶段构建"></a>2.4 Dockerfile 多阶段构建</h2><ul>
<li>以前是全部放到一个Dockerfile里面，将编译，测试，打包放在一起，可能导致镜像层次过多，源代码泄露风险</li>
<li>分多个Dockerfile编写，然后指定文件逐个构建</li>
<li>使用多阶段构建</li>
</ul>
<pre class="language-Dockerfile" data-language="Dockerfile"><code class="language-Dockerfile">FROM golang:alpine as builder
RUN apk --no-cache add git
WORKDIR &#x2F;go&#x2F;src&#x2F;github.com&#x2F;go&#x2F;helloworld&#x2F;
RUN go get -d -v github.com&#x2F;go-sql-driver&#x2F;mysql
COPY app.go .
RUN CGO_ENABLED&#x3D;0 GOOS&#x3D;linux go build -a -installsuffix cgo -o app .
FROM alpine:latest as prod
RUN apk --no-cache add ca-certificates
WORKDIR &#x2F;root&#x2F;
COPY --from&#x3D;0 &#x2F;go&#x2F;src&#x2F;github.com&#x2F;go&#x2F;helloworld&#x2F;app .
CMD [&quot;.&#x2F;app&quot;]
&#x2F;&#x2F; 构建镜像  docker build -t go&#x2F;helloworld:3 .</code></pre>

<pre><code>- 我们可以使用 `as` 来为某一阶段命名，例如`FROM golang:alpine as builder`
- 例如当我们只想构建 `builder` 阶段的镜像时，增加 `--target=builder` 参数即可 `$ docker build --target builder -t username/imagename:tag .`
</code></pre>
<ul>
<li>构建时从其他镜像复制文件<br>上面例子中我们使用 <code>COPY --from=0 /go/src/github.com/go/helloworld/app .</code> 从上一阶段的镜像中复制文件，我们也可以复制任意镜像中的文件<br><code>$ COPY --from=nginx:latest /etc/nginx/nginx.conf /nginx.conf</code></li>
</ul>
<h2 id="实战多阶段构建镜像"><a href="#实战多阶段构建镜像" class="headerlink" title="实战多阶段构建镜像"></a>实战多阶段构建镜像</h2><p><a target="_blank" rel="noopener" href="https://github.com/nigelpoulton/dotnet-docker-samples.git">实战地址</a>  </p>
<ul>
<li><p>生产环境多阶段构建需要保持镜像精简，可以通过&amp;&amp;精简镜像层</p>
</li>
<li><p>run指令执行完会残留构建镜像完后的文件，直接上生产及其不妥，docker提供了多种方式解决这个问题，重瞳方式叫<code>建造者模式</code></p>
<ol>
<li>构建<code>Dockerfile.dev</code>文件</li>
<li>在此基础之上构建新一层镜像</li>
<li>编写Dockerfile.prod，把上一步容器的相关代码和文件复制过来</li>
</ol>
</li>
<li><p>多阶段构建方式<br>分析Dockerfile文件</p>
</li>
</ul>
<pre class="language-Dockerfile" data-language="Dockerfile"><code class="language-Dockerfile">FROM mcr.microsoft.com&#x2F;dotnet&#x2F;sdk:6.0 AS build
WORKDIR &#x2F;source

# copy csproj and restore as distinct layers
COPY *.sln .
COPY aspnetapp&#x2F;*.csproj .&#x2F;aspnetapp&#x2F;
RUN dotnet restore

# copy everything else and build app
COPY aspnetapp&#x2F;. .&#x2F;aspnetapp&#x2F;
WORKDIR &#x2F;source&#x2F;aspnetapp
RUN dotnet publish -c release -o &#x2F;app --no-restore

# final stage&#x2F;image
FROM mcr.microsoft.com&#x2F;dotnet&#x2F;aspnet:6.0
WORKDIR &#x2F;app
COPY --from&#x3D;build &#x2F;app .&#x2F;
ENTRYPOINT [&quot;dotnet&quot;, &quot;aspnetapp.dll&quot;]</code></pre>

<p>首先注意到，<code>Dockerfile</code>有三个<code>FROM</code>指令。每一个<code>FROM</code>指令构成一个单独的<strong>构建阶段</strong>  </p>
<ol>
<li><p>阶段<code>0</code>：<code>build-env</code><br> <code>build-env</code>阶段拉取了<code>aspnetcore-build:2.0</code>作为基础镜像，然后设置了工作目录，复制一些应用代码，接着执行两个<code>RUN</code>指令，生成<code>1</code>个镜像层并显著得到一个比原镜像大得多的镜像，包含许多构建工具和应用代码</p>
</li>
<li><p>阶段<code>1</code>：<code>microsoft/aspnetcore:2.0</code><br> <code>aspnetcore:2.0</code>阶段拉取了<code>aspnetcore:2.0</code>作为基础镜像，设置工作目录，然后执行<code>COPY --from</code>指令从<code>build-env</code>阶段生成的镜像中复制一些应用代码过来，最后执行<code>ENTRYPOINT</code>指令指定容器的默认应用程序</p>
</li>
</ol>
<p>上述构建过程的重点在于<code>COPY --from</code>指令<strong>表示从之前的构建阶段复制生产环境相关的应用代码，而不会复制生产环境不需要的构件</strong></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7053651f6091402c9c8ff10c99d1ae34~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<h2 id="2-5-构建多种系统架构支持的docker镜像"><a href="#2-5-构建多种系统架构支持的docker镜像" class="headerlink" title="2.5 构建多种系统架构支持的docker镜像"></a>2.5 构建多种系统架构支持的docker镜像</h2><p><code>$ docker manifest inspect golang:alpine</code><br>查看manifest列表</p>
<ul>
<li>创建manifest 列表</li>
<li>设置manifest列表</li>
<li>查看manifest列表</li>
<li>推送manifest列表</li>
<li>测试</li>
<li><a target="_blank" rel="noopener" href="https://www.docker.com/blog/multi-arch-all-the-things/">官方博客</a></li>
</ul>
<h2 id="2-6-其它制作镜像的方式"><a href="#2-6-其它制作镜像的方式" class="headerlink" title="2.6 其它制作镜像的方式"></a>2.6 其它制作镜像的方式</h2><ul>
<li>从 rootfs 压缩包导入</li>
</ul>
<pre class="language-docker" data-language="docker"><code class="language-docker">$ docker import \
    http:&#x2F;&#x2F;download.openvz.org&#x2F;template&#x2F;precreated&#x2F;ubuntu-16.04-x86_64.tar.gz \
    openvz&#x2F;ubuntu:16.04

Downloading from http:&#x2F;&#x2F;download.openvz.org&#x2F;template&#x2F;precreated&#x2F;ubuntu-16.04-x86_64.tar.gz
sha256:412b8fc3e3f786dca0197834a698932b9c51b69bd8cf49e100c35d38c9879213
&#x2F;&#x2F; 从web远程下载ubuntu然后制作镜像</code></pre>

<ul>
<li>Docker 镜像的导入和导出 <code>docker save</code> 和 <code>docker load</code> ，目前已经不推荐</li>
</ul>
<h1 id="3-操作容器"><a href="#3-操作容器" class="headerlink" title="3. 操作容器"></a>3. 操作容器</h1><h2 id="3-1-容器基本操作"><a href="#3-1-容器基本操作" class="headerlink" title="3.1 容器基本操作"></a>3.1 容器基本操作</h2><p>两种启动容器方式，从镜像到容器，启动停止的容器</p>
<ul>
<li>新建容器</li>
</ul>
<pre class="language-Dockerfile" data-language="Dockerfile"><code class="language-Dockerfile">$ docker run -dit --name new_name ubuntu:18.04 &#x2F;bin&#x2F;echo &#39;Hello world&#39;
Hello world</code></pre>

<p>-itd 意思是指容器绑定标准输入输出，然后绑定个伪终端，然后以守护态运行<br>要获取容器的输出信息，可以通过 <code>docker container logs</code> 命令</p>
<ul>
<li>stop&#x2F;restart 容器<br>docker container ls &#x2F;&#x2F;查看容器<br>docker container restart<br>docker container stop&#x2F;start</li>
<li>进入容器<br><code>docker attach</code> 进入容器<br><code>docker exec -it</code> 进入容器</li>
<li>导出&#x2F;导入容器<br><code>docker export 7691a814370e &gt; ubuntu.tar</code><br><code>docker import - test/ubuntu:v1.0</code><br><code>docker import url</code></li>
<li>删除容器<br><code>docker container rm trusting_newton</code><br><code>docker container prune</code> 清理所有种植状态的容器</li>
</ul>
<h1 id="4-访问仓库"><a href="#4-访问仓库" class="headerlink" title="4. 访问仓库"></a>4. 访问仓库</h1><ol>
<li>docker hub</li>
<li>私有仓库</li>
<li>私有仓库高级配置</li>
<li>nexus3</li>
</ol>
<h1 id="5-数据管理"><a href="#5-数据管理" class="headerlink" title="5. 数据管理"></a>5. 数据管理</h1><h2 id="5-1-数据卷"><a href="#5-1-数据卷" class="headerlink" title="5.1 数据卷"></a>5.1 数据卷</h2><p>对数据卷的使用有点像linux的mount，镜像中被挂载的目录文件会复制到宿主机的目录上，独立于容器</p>
<ol>
<li>创建一个数据卷</li>
</ol>
<pre class="language-docker" data-language="docker"><code class="language-docker">docker volume create my-vol  创建一个数据卷  
docker volume ls  列举数据卷  
docker volume inspect my_vol 查看某一个数据卷  </code></pre>

<ol start="2">
<li>启动一个挂在了数据卷的容器</li>
</ol>
<pre class="language-docker" data-language="docker"><code class="language-docker">docker run -d -P \
    --name web \
    # -v my-vol:&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html \
    --mount source&#x3D;my-vol,target&#x3D;&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html \
    nginx:alpine
&#x2F;&#x2F;使用my_vol数据卷，映射到&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html</code></pre>

<ol start="3">
<li>查看数据卷具体信息</li>
</ol>
<pre class="language-docker" data-language="docker"><code class="language-docker">docker inspect web &#x2F;&#x2F;数据卷信息在Mounts key下
....
&quot;Mountpoint&quot;: &quot;&#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes&#x2F;my-vol&#x2F;_data&quot; &#x2F;&#x2F;默认位置</code></pre>

<p>4.删除一个数据卷</p>
<pre class="language-docker" data-language="docker"><code class="language-docker">docker volume rm my-vol
docker volume prune &#x2F;&#x2F;删除无主的数据卷</code></pre>

<ul>
<li>数据卷可以在容器间共用</li>
<li>对数据卷的修改会立马生效</li>
<li>对数据卷的更新，不会影响镜像</li>
<li>数据卷默认会一直存在，即使容器被输出</li>
</ul>
<h2 id="5-2-挂载主机目录"><a href="#5-2-挂载主机目录" class="headerlink" title="5.2 挂载主机目录"></a>5.2 挂载主机目录</h2><ol>
<li>挂载目录到容器目录</li>
</ol>
<pre class="language-docker" data-language="docker"><code class="language-docker">$ docker run -d -P \
    --name web \
    # -v &#x2F;src&#x2F;webapp:&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html \
    --mount type&#x3D;bind,source&#x3D;&#x2F;src&#x2F;webapp,target&#x3D;&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html, readonly \
    nginx:alpine</code></pre>

<p><code>挂载主机目录</code> 的配置信息在 “Mounts” Key 下面</p>
<ul>
<li>目录与容器目录绑定，容器写进文件，就会落盘到宿主机上  </li>
<li>目前如果source不存在就会报错  </li>
<li>宿主机目录也可以指定readonly</li>
</ul>
<ol start="2">
<li>挂载宿主机文件到容器文件中<br>source&#x3D;  ,target&#x3D; 关键字处直接替换成文件</li>
</ol>
<h1 id="6-网络"><a href="#6-网络" class="headerlink" title="6. 网络"></a>6. 网络</h1><h2 id="6-1-端口映射"><a href="#6-1-端口映射" class="headerlink" title="6.1 端口映射"></a>6.1 端口映射</h2><p>-P 会随即映射<br>-p 特定端口映,可使用多次指定多个端口</p>
<ul>
<li><code>$ docker run -d -p 80:80 nginx:alpine</code> hostport:containerport  </li>
<li><code>$ docker run -d -p 127.0.0.1:80:80 nginx:alpine</code> 指定地址绑定，容器有自己的网络和地址</li>
<li><code>$ docker run -d -p 127.0.0.1::80/udp nginx:alpine</code> 容器80端口随机映射到主机,并指定传输协议</li>
</ul>
<h2 id="6-2-容器互联"><a href="#6-2-容器互联" class="headerlink" title="6.2 容器互联"></a>6.2 容器互联</h2><ol>
<li>新建网络</li>
</ol>
<pre class="language-docker" data-language="docker"><code class="language-docker">docker network create -d bridge my-net</code></pre>

<p><code>-d</code> 参数指定 Docker 网络类型，有 <code>bridge</code> <code>overlay</code>。其中 <code>overlay</code> 网络类型用于 <a href="/docker_practice/swarm_mode">Swarm mode</a>，在本小节中你可以忽略它<br>2. 容器互联</p>
<pre class="language-docker" data-language="docker"><code class="language-docker">docker run -it --rm --name busybox1 --network my-net busybox sh
docker run -it --rm --name busybox2 --network my-net busybox sh
</code></pre>

<p>可以直接ping另外的容器</p>
<ul>
<li>Docker Compose 可以考虑使用</li>
</ul>
<h2 id="6-3-配置DNS"><a href="#6-3-配置DNS" class="headerlink" title="6.3. 配置DNS"></a>6.3. 配置DNS</h2><p>TBC</p>
<h1 id="7-高级网络配置"><a href="#7-高级网络配置" class="headerlink" title="7. 高级网络配置"></a>7. 高级网络配置</h1><h1 id="8-Docker-Buildx"><a href="#8-Docker-Buildx" class="headerlink" title="8. Docker Buildx"></a>8. Docker Buildx</h1><h1 id="9-Docker-Compose"><a href="#9-Docker-Compose" class="headerlink" title="9. Docker Compose"></a>9. Docker Compose</h1><p>结合实战操纵理解</p>
<h2 id="9-1-搭建一个web应用"><a href="#9-1-搭建一个web应用" class="headerlink" title="9.1 搭建一个web应用"></a>9.1 搭建一个web应用</h2><ul>
<li>服务：运行多个相同镜像的实例</li>
<li>项目：一组应用容器组成的一个完整单元<br><a target="_blank" rel="noopener" href="https://docs.docker.com/compose/compose-file/">docker compose</a></li>
</ul>
<h1 id="10-安全"><a href="#10-安全" class="headerlink" title="10. 安全"></a>10. 安全</h1><h1 id="11-底层实现"><a href="#11-底层实现" class="headerlink" title="11. 底层实现"></a>11. 底层实现</h1><h1 id="12-Kubernetes"><a href="#12-Kubernetes" class="headerlink" title="12. Kubernetes"></a>12. Kubernetes</h1><h1 id="13-实战案例-CI-x2F-CD"><a href="#13-实战案例-CI-x2F-CD" class="headerlink" title="13. 实战案例 - CI&#x2F;CD"></a>13. 实战案例 - CI&#x2F;CD</h1>
                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/06/22/docker%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/06/22/%E5%A5%94%E8%B7%91%E5%90%A7ansible/"
                            aria-label=": 奔跑吧ansible"
                        >
                            奔跑吧ansible
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-06-22T20:45:28+08:00">
	
		    Jun 22, 2022
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/CICD/">CICD</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <span id="more"></span>
<p>奔跑吧ansible</p>
<!-- more -->
<h1 id="3-第三章-inventory-描述你的服务器"><a href="#3-第三章-inventory-描述你的服务器" class="headerlink" title="3. 第三章 inventory:描述你的服务器"></a>3. 第三章 inventory:描述你的服务器</h1><p>ansible管理的多台主机文件叫inventory</p>
<h2 id="3-1-inventory基本参数含义"><a href="#3-1-inventory基本参数含义" class="headerlink" title="3.1 inventory基本参数含义"></a>3.1 inventory基本参数含义</h2><p>inventory文件通常是.ini格式的，常用inventory参数如下</p>
<pre class="language-txt" data-language="txt"><code class="language-txt">ansible_ssh_host     #用于指定被管理的主机的真实IP和将要连接的远程主机名.与你想要设定的主机的别名不同的话,可通过此变量设置.
ansible_ssh_port     #用于指定连接到被管理主机的ssh端口号，默认是22，如果不是默认的端口号,通过此变量设置.
ansible_ssh_user     #ssh连接时默认使用的用户名
ansible_ssh_pass     #ssh连接时的密码，(这种方式并不安全,我们强烈建议使用 --ask-pass（交互密码）或 SSH 密钥)
ansible_sudo_pass     #使用sudo连接用户时的密码，(这种方式并不安全,我们强烈建议使用 --ask-sudo-pass)
ansible_sudo_exec     #如果sudo命令不在默认路径，需要指定sudo命令路径(适用于1.8及以上版本)
ansible_ssh_private_key_file     #秘钥文件路径，秘钥文件如果不想使用ssh-agent管理时可以使用此选项
ansible_shell_type     #目标系统的shell的类型，默认sh，可设置为 'csh' 或 'fish'.
ansible_connection     #SSH 连接的类型： local , ssh , paramiko，在 ansible 1.2 之前默认是 paramiko ，后来智能选择，优先使用基于 ControlPersist 的 ssh （支持的前提）
ansible_python_interpreter     #用来指定python解释器的路径，默认为/usr/bin/python 同样可以指定ruby 、perl 的路径
ansible_*_interpreter     #其他解释器路径，用法与ansible_python_interpreter类似，这里"*"可以是ruby或才perl等其他语言
以上是2.0版本之前的参数，2.0之后有更换，但是向下兼容</code></pre>

<h3 id="3-1-1-主机别名和群组"><a href="#3-1-1-主机别名和群组" class="headerlink" title="3.1.1 主机别名和群组"></a>3.1.1 主机别名和群组</h3><p>inventory支持群组,类似于下面</p>
<pre class="language-yaml" data-language="yaml"><code class="language-yaml">[webservers]
testserver ansible_port&#x3D;2202

&#x2F;&#x2F;群组变量
[webservers:vars] 
ansible_user &#x3D; vagrant
ansible_host &#x3D; 127.0.0.1
ansible_private_key_file &#x3D; .vagrant&#x2F;machines&#x2F;default&#x2F;virtualbox&#x2F;private_key

[web]
web[1:20].example.com
</code></pre>

<h3 id="3-1-2-主机和群组变量，在inventory各自文件中"><a href="#3-1-2-主机和群组变量，在inventory各自文件中" class="headerlink" title="3.1.2 主机和群组变量，在inventory各自文件中"></a>3.1.2 主机和群组变量，在inventory各自文件中</h3><p>在inventory目录下我们根据环境，将不同阶段的变量放进文件，<code>group_vars</code>文件夹下文件名要与<code>hosts</code>文件中的群组保持一致</p>
<pre class="language-text" data-language="text"><code class="language-text">group_vars
|----production
|      |- db_primary_host: rhodeisland.example.com
|      |- db_replica_host: virginia.example.com
|      |- db_name: widget_production
|      |- db_user: widgetuser
|      |- db_password: pFmMxcyD;Fc6)6
|      |- rabbitmq_host: pennsylvania.example.com
|----preprod
|      |- db_primary_host: chicago.example.com
|      |- db_replica_host: amsterdam.example.com
|      |- db_name: widget_staging
|      |- db_user: widgetuser
|      |- db_password: L@4Ryz8cRUXedj
|      |- rabbitmq_host: chicago.example.com</code></pre>

<h3 id="3-1-3-动态inventory脚本接口"><a href="#3-1-3-动态inventory脚本接口" class="headerlink" title="3.1.3 动态inventory脚本接口"></a>3.1.3 动态inventory脚本接口</h3><p>对于用何种语言实现脚本，没有要求，但必须支持传<code>--list</code>和<code>--host=&lt;hostname&gt;</code>参数,同时<code>--list</code>输出的json字符串也有要求。有群组和主机键值对，<code>_meta</code>要保存主机变量</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">.&#x2F;dynamic.py  --list</code></pre>

<p>output</p>
<pre class="language-json" data-language="json"><code class="language-json">
&#123;
    &quot;group1&quot;: &#123;
        &quot;hosts&quot;: [
            &quot;192.168.28.71&quot;,
            &quot;192.168.28.72&quot;
        ],
        &quot;vars&quot;: &#123;
            &quot;ansible_ssh_user&quot;: &quot;johndoe&quot;,
            &quot;ansible_ssh_private_key_file&quot;: &quot;~&#x2F;.ssh&#x2F;mykey&quot;,
            &quot;example_variable&quot;: &quot;value&quot;
        &#125;,
        &quot;children&quot;:[&#39;group2&#39;]
    &#125;,
    &quot;_meta&quot;: &#123;
        &quot;hostvars&quot;: &#123;
            &quot;192.168.28.71&quot;: &#123;
                &quot;host_specific_var&quot;: &quot;bar&quot;
            &#125;,
            &quot;192.168.28.72&quot;: &#123;
                &quot;host_specific_var&quot;: &quot;foo&quot;
            &#125;
        &#125;
    &#125;
&#125;</code></pre>

<pre class="language-bash" data-language="bash"><code class="language-bash">.&#x2F;dynamic.py  --host&#x3D;192.168.28.71</code></pre>

<p>output</p>
<pre class="language-json" data-language="json"><code class="language-json">&#123;
    &quot;host_specific_var&quot;: &quot;foo&quot;
&#125;</code></pre>

<p>ansible支持将动态inventory和动态的inventory放在同一文件夹下(名为inventory的文件夹)通过ansible.cfg的hostfile进行控制，也可以使用<code>-i</code>参数进行控制</p>
<h3 id="3-1-4-add-host模块和group-by模块"><a href="#3-1-4-add-host模块和group-by模块" class="headerlink" title="3.1.4 add_host模块和group_by模块"></a>3.1.4 add_host模块和group_by模块</h3><p><code>add_host</code><br>playbook运行时，主机被创建是无法追加新主机的。使用<code>add_host</code>模块就可以添加新主机并在此次playbook中生效<br><code>group_by</code><br>书上使用group_by 实现了按照OS系统类型进行分组执行(像if语句)，yml中具体参数不知道什么意思.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/06/22/%E5%A5%94%E8%B7%91%E5%90%A7ansible/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
          <li class="pagination-prev">
            <a
                class="btn btn--default btn--small"
                href="/archives/2022/page/5/"
                aria-label="NEWER POSTS"
            >
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>NEWER POSTS</span>
            </a>
          </li>
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="/archives/2022/page/7/"
                aria-label="OLDER POSTS"
            >
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 6 of 7</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2022 kirkzhang. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">kirkzhang</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                nil
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-oejgoqwxqxfpwex5ev6ukctltwog5vlqaetakgrj0ys9pwba1gtnkqh5ga78.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
